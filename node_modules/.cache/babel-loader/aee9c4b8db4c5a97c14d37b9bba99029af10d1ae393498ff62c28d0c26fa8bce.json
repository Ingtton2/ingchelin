{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useFavorites}from'../context/FavoriteContext';import{useVisit}from'../context/VisitContext';import{useSearchParams}from'react-router-dom';import RestaurantDetailModal from'../components/RestaurantDetailModal';import'./Map.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function KakaoMap(){const[restaurants,setRestaurants]=useState([]);const[selectedRestaurant,setSelectedRestaurant]=useState(null);const{addToFavorites,removeFromFavorites,isInFavorites}=useFavorites();const{getRestaurantVisitStatus,setRestaurantVisitStatus}=useVisit();const[mapLoaded,setMapLoaded]=useState(false);const[userLocation,setUserLocation]=useState(null);const[nearbyRestaurants,setNearbyRestaurants]=useState([]);const[userMarker,setUserMarker]=useState(null);const[isLoadingLocation,setIsLoadingLocation]=useState(false);const[searchParams]=useSearchParams();const[mapInstance,setMapInstance]=useState(null);// ìƒˆë¡œìš´ ìƒíƒœë“¤\nconst[searchQuery,setSearchQuery]=useState('');const[selectedCategories,setSelectedCategories]=useState(['í•œì‹','ì¤‘ì‹','ì¼ì‹','ì–‘ì‹','ë¶„ì‹','íƒœêµ­','ìˆ ','ì¹´í˜','ë””ì €íŠ¸']);const[filteredRestaurants,setFilteredRestaurants]=useState([]);// ë§ˆì»¤ ìƒíƒœ ì¶”ê°€\nconst[markers,setMarkers]=useState([]);const[labels,setLabels]=useState([]);// ë§ˆì»¤ ìƒíƒœ í•„í„° ì¶”ê°€\nconst[selectedMarkerStatus,setSelectedMarkerStatus]=useState(['favorited','liked','disliked','not-visited']);// ë¯¸ë‹ˆ íŒì—… ìƒíƒœ ì¶”ê°€\nconst[miniPopup,setMiniPopup]=useState(null);const[popupPosition,setPopupPosition]=useState({x:0,y:0});const[isDragging,setIsDragging]=useState(false);const[dragOffset,setDragOffset]=useState({x:0,y:0});// ìƒì„¸ì •ë³´ ëª¨ë‹¬ ìƒíƒœ ì¶”ê°€\nconst[detailModal,setDetailModal]=useState(null);// ë“œë˜ê·¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\nconst handleMouseDown=e=>{setIsDragging(true);setDragOffset({x:e.clientX-popupPosition.x,y:e.clientY-popupPosition.y});};const handleMouseMove=e=>{if(isDragging){setPopupPosition({x:e.clientX-dragOffset.x,y:e.clientY-dragOffset.y});}};const handleMouseUp=()=>{setIsDragging(false);};// ì¹´í…Œê³ ë¦¬ ì˜µì…˜\nconst categories=['í•œì‹','ì¤‘ì‹','ì¼ì‹','ì–‘ì‹','ë¶„ì‹','íƒœêµ­','ìˆ ','ì¹´í˜','ë””ì €íŠ¸'];// ë§ˆì»¤ ìƒíƒœ ì˜µì…˜\nconst markerStatusOptions=[{value:'favorited',label:'ì°œí•œ ë§›ì§‘',color:'#FF3B30',icon:'â¤ï¸'},{value:'liked',label:'ë°©ë¬¸í•œ ê³³ (ì¢‹ì•˜ë˜ ê³³)',color:'#007AFF',icon:'ğŸ‘'},{value:'disliked',label:'ë°©ë¬¸í•œ ê³³ (ë³„ë¡œì¸ ê³³)',color:'#8E8E93',icon:'ğŸ‘'},{value:'not-visited',label:'ì•ˆ ê°€ë³¸ ê³³',color:'#FF6B6B',icon:'â“'}];// ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë ˆìŠ¤í† ë‘ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nconst fetchRestaurants=async()=>{try{const response=await fetch('http://localhost:8080/api/restaurants');if(response.ok){const data=await response.json();// ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì§€ë„ í˜•ì‹ì— ë§ê²Œ ë³€í™˜\nconst formattedData=data.map(restaurant=>({id:restaurant.id,name:restaurant.name,category:restaurant.cuisine,rating:restaurant.rating||4.0,address:restaurant.address,description:restaurant.description||`${restaurant.cuisine} ì „ë¬¸ì ì…ë‹ˆë‹¤.`,price:restaurant.price||\"1ë§Œì›~3ë§Œì›\",position:{lat:restaurant.latitude||37.5665,lng:restaurant.longitude||126.9780},hours:restaurant.businessHours||\"11:00 - 22:00\",phone:restaurant.phone||\"02-0000-0000\",parking:restaurant.parking||\"ì£¼ì°¨ ê°€ëŠ¥\"}));setRestaurants(formattedData);setFilteredRestaurants(formattedData);}else{console.error('ë ˆìŠ¤í† ë‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');// ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©\nconst defaultData=[{id:1,name:\"ë§›ìˆëŠ” í•œì‹ì§‘\",category:\"í•œì‹\",rating:4.5,address:\"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123\",description:\"ì „í†µ í•œì‹ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",price:\"1ë§Œì›~3ë§Œì›\",position:{lat:37.5665,lng:126.9780},hours:\"11:00 - 22:00\",phone:\"02-1234-5678\",parking:\"ì£¼ì°¨ ê°€ëŠ¥\"},{id:2,name:\"ì‹ ì„ í•œ ì¼ì‹ì§‘\",category:\"ì¼ì‹\",rating:4.3,address:\"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 456\",description:\"ì‹ ì„ í•œ íšŒì™€ ì´ˆë°¥ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",price:\"2ë§Œì›~5ë§Œì›\",position:{lat:37.5668,lng:126.9785},hours:\"11:30 - 22:30\",phone:\"02-2345-6789\",parking:\"ì£¼ì°¨ ë¶ˆê°€\"}];setRestaurants(defaultData);setFilteredRestaurants(defaultData);}}catch(error){console.error('ë ˆìŠ¤í† ë‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:',error);// ì—ëŸ¬ ì‹œì—ë„ ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©\nconst defaultData=[{id:1,name:\"ë§›ìˆëŠ” í•œì‹ì§‘\",category:\"í•œì‹\",rating:4.5,address:\"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123\",description:\"ì „í†µ í•œì‹ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",price:\"1ë§Œì›~3ë§Œì›\",position:{lat:37.5665,lng:126.9780},hours:\"11:00 - 22:00\",phone:\"02-1234-5678\",parking:\"ì£¼ì°¨ ê°€ëŠ¥\"},{id:2,name:\"ì‹ ì„ í•œ ì¼ì‹ì§‘\",category:\"ì¼ì‹\",rating:4.3,address:\"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 456\",description:\"ì‹ ì„ í•œ íšŒì™€ ì´ˆë°¥ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",price:\"2ë§Œì›~5ë§Œì›\",position:{lat:37.5668,lng:126.9785},hours:\"11:30 - 22:30\",phone:\"02-2345-6789\",parking:\"ì£¼ì°¨ ë¶ˆê°€\"}];setRestaurants(defaultData);setFilteredRestaurants(defaultData);}};// ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nuseEffect(()=>{fetchRestaurants();},[]);// ê²€ìƒ‰ ë° í•„í„°ë§ í•¨ìˆ˜\nuseEffect(()=>{let filtered=restaurants;// ê²€ìƒ‰ì–´ í•„í„°ë§\nif(searchQuery.trim()){filtered=filtered.filter(restaurant=>restaurant.name.toLowerCase().includes(searchQuery.toLowerCase())||restaurant.address.toLowerCase().includes(searchQuery.toLowerCase())||restaurant.category.toLowerCase().includes(searchQuery.toLowerCase()));}// ì¹´í…Œê³ ë¦¬ í•„í„°ë§\nfiltered=filtered.filter(restaurant=>selectedCategories.includes(restaurant.category));// ë§ˆì»¤ ìƒíƒœ í•„í„°ë§\nfiltered=filtered.filter(restaurant=>{if(isInFavorites(restaurant.id)){return selectedMarkerStatus.includes('favorited');}else{const visitStatus=getRestaurantVisitStatus(restaurant.id);if(visitStatus==='liked'){return selectedMarkerStatus.includes('liked');}else if(visitStatus==='disliked'){return selectedMarkerStatus.includes('disliked');}else{return selectedMarkerStatus.includes('not-visited');}}});setFilteredRestaurants(filtered);},[restaurants,searchQuery,selectedCategories,selectedMarkerStatus]);// ë§ˆì»¤ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\nconst updateMapMarkers=restaurantsToShow=>{if(!mapInstance)return;// ê¸°ì¡´ ë§ˆì»¤ì™€ ë¼ë²¨ ì œê±°\nmarkers.forEach(marker=>marker.setMap(null));labels.forEach(label=>label.setMap(null));const newMarkers=[];const newLabels=[];// ìƒˆë¡œìš´ ë§ˆì»¤ì™€ ë¼ë²¨ ì¶”ê°€\nrestaurantsToShow.forEach(restaurant=>{// ë§ˆì»¤ ìƒ‰ìƒ ê²°ì •\nlet markerColor='#FF6B6B';// ê¸°ë³¸ ìƒ‰ìƒ\nlet markerIcon=getCategoryIcon(restaurant.category);// ìƒíƒœë³„ ìƒ‰ìƒ ì ìš©\nif(isInFavorites(restaurant.id)){markerColor='#FF3B30';// ì°œí•œ ë§›ì§‘ - ë¹¨ê°„ìƒ‰\n}else{const visitStatus=getRestaurantVisitStatus(restaurant.id);if(visitStatus==='liked'){markerColor='#007AFF';// ë°©ë¬¸í•œ ê³³ (ì¢‹ì•˜ë˜ ê³³) - íŒŒë€ìƒ‰\n}else if(visitStatus==='disliked'){markerColor='#8E8E93';// ë°©ë¬¸í•œ ê³³ (ë³„ë¡œì¸ ê³³) - íšŒìƒ‰\n}}// ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ê³¼ ìƒ‰ìƒìœ¼ë¡œ ë§ˆì»¤ ìƒì„±\nconst marker=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(restaurant.position.lat,restaurant.position.lng),image:new window.kakao.maps.MarkerImage(createMarkerImage(markerColor,markerIcon),new window.kakao.maps.Size(40,40))});marker.setMap(mapInstance);newMarkers.push(marker);// ë§ˆì»¤ ìœ„ì— ì‹ë‹¹ ì´ë¦„ë§Œ í‘œì‹œí•˜ëŠ” ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´\nconst content=`\n        <div class=\"marker-label\">\n          <div class=\"marker-label-content\">\n            ${restaurant.name}\n          </div>\n        </div>\n      `;const label=new window.kakao.maps.CustomOverlay({content:content,position:new window.kakao.maps.LatLng(restaurant.position.lat,restaurant.position.lng),xAnchor:0.5,yAnchor:1.5});label.setMap(mapInstance);newLabels.push(label);// ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸\nwindow.kakao.maps.event.addListener(marker,'click',()=>{setSelectedRestaurant(restaurant);// ë¯¸ë‹ˆ íŒì—… í‘œì‹œ - ì§€ë„ ì»¨í…Œì´ë„ˆ ë‚´ ìƒëŒ€ì  ìœ„ì¹˜ë¡œ ê³„ì‚°\nconst position=new window.kakao.maps.LatLng(restaurant.position.lat,restaurant.position.lng);const projection=mapInstance.getProjection();const point=projection.pointFromCoords(position);setMiniPopup(restaurant);setPopupPosition({x:point.x,y:point.y-80// ë§ˆì»¤ ìœ„ì— í‘œì‹œ\n});});});setMarkers(newMarkers);setLabels(newLabels);};// ë§ˆì»¤ ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜\nconst createMarkerImage=(color,icon)=>{const canvas=document.createElement('canvas');canvas.width=40;canvas.height=40;const ctx=canvas.getContext('2d');// ì›í˜• ë°°ê²½ ê·¸ë¦¬ê¸°\nctx.beginPath();ctx.arc(20,20,18,0,2*Math.PI);ctx.fillStyle=color;ctx.fill();ctx.strokeStyle='white';ctx.lineWidth=2;ctx.stroke();// ì•„ì´ì½˜ í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°\nctx.fillStyle='white';ctx.font='16px Arial';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(icon,20,20);return canvas.toDataURL();};// í•„í„°ë§ëœ ë ˆìŠ¤í† ë‘ì´ ë³€ê²½ë  ë•Œ ë§ˆì»¤ ì—…ë°ì´íŠ¸\nuseEffect(()=>{if(mapLoaded&&mapInstance){updateMapMarkers(filteredRestaurants);// URL íŒŒë¼ë¯¸í„°ë¡œ íŠ¹ì • ì‹ë‹¹ì´ ì§€ì •ëœ ê²½ìš° í•´ë‹¹ ì‹ë‹¹ ì •ë³´ í‘œì‹œ\nconst restaurantId=searchParams.get('restaurantId');if(restaurantId){const selectedRestaurant=filteredRestaurants.find(restaurant=>restaurant.id.toString()===restaurantId);if(selectedRestaurant){setTimeout(()=>{setSelectedRestaurant(selectedRestaurant);},1000);}}}},[filteredRestaurants,mapLoaded,mapInstance,searchParams]);// ì¹´í…Œê³ ë¦¬ í† ê¸€ í•¨ìˆ˜\nconst toggleCategory=category=>{setSelectedCategories(prev=>prev.includes(category)?prev.filter(c=>c!==category):[...prev,category]);};// ëª¨ë“  ì¹´í…Œê³ ë¦¬ í† ê¸€ í•¨ìˆ˜\nconst toggleAllCategories=()=>{setSelectedCategories(selectedCategories.length===categories.length?[]:categories);};// ê²€ìƒ‰ì–´ ì´ˆê¸°í™” í•¨ìˆ˜\nconst clearSearch=()=>{setSearchQuery('');};// ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ ë°˜í™˜ í•¨ìˆ˜\nconst getCategoryIcon=category=>{const icons={'í•œì‹':'ğŸš','ì–‘ì‹':'ğŸ','ì¼ì‹':'ğŸ£','ì¤‘ì‹':'ğŸ¥¢','ì¹´í˜':'â˜•','ë””ì €íŠ¸':'ğŸ°','ë¶„ì‹':'ğŸ¡','ìˆ ':'ğŸº','íƒœêµ­':'ğŸœ'};return icons[category]||'ğŸ½ï¸';};// ë§ˆì»¤ ìƒíƒœ í† ê¸€ í•¨ìˆ˜\nconst toggleMarkerStatus=status=>{setSelectedMarkerStatus(prev=>prev.includes(status)?prev.filter(s=>s!==status):[...prev,status]);};// ëª¨ë“  ë§ˆì»¤ ìƒíƒœ í† ê¸€ í•¨ìˆ˜\nconst toggleAllMarkerStatus=()=>{setSelectedMarkerStatus(selectedMarkerStatus.length===markerStatusOptions.length?[]:markerStatusOptions.map(option=>option.value));};useEffect(()=>{// ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë ˆìŠ¤í† ë‘ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\nfetchRestaurants();// URL íŒŒë¼ë¯¸í„° í™•ì¸\nconst restaurantId=searchParams.get('restaurantId');const lat=searchParams.get('lat');const lng=searchParams.get('lng');// ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°\nconst getUserLocationForMap=()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;const newUserLocation={lat:latitude,lng:longitude};setUserLocation(newUserLocation);// ì‚¬ìš©ì ìœ„ì¹˜ë¡œ ì§€ë„ ì´ˆê¸°í™”\ninitKakaoMapWithLocation(latitude,longitude);},error=>{console.log('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:',error);// ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìœ¼ë©´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì´ˆê¸°í™”\ninitKakaoMapWithLocation();});}else{// ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì´ˆê¸°í™”\ninitKakaoMapWithLocation();}};// ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” (ìœ„ì¹˜ ì •ë³´ í¬í•¨)\nconst initKakaoMapWithLocation=function(){let userLat=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let userLng=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(window.kakao&&window.kakao.maps){const container=document.getElementById('map');// ìš°ì„ ìˆœìœ„: URL íŒŒë¼ë¯¸í„° > ì‚¬ìš©ì ìœ„ì¹˜ > ê¸°ë³¸ ìœ„ì¹˜\nlet centerLat,centerLng;if(lat&&lng){centerLat=parseFloat(lat);centerLng=parseFloat(lng);}else if(userLat&&userLng){centerLat=userLat;centerLng=userLng;}else{centerLat=37.3520;// ì •ìë™ ì¤‘ì‹¬\ncenterLng=127.1087;}const options={center:new window.kakao.maps.LatLng(centerLat,centerLng),level:restaurantId?3:6};const map=new window.kakao.maps.Map(container,options);setMapInstance(map);setMapLoaded(true);// ì´ˆê¸° ë§ˆì»¤ ì„¤ì • (ì „ì²´ ë ˆìŠ¤í† ë‘)\nupdateMapMarkers(restaurants);// ì‚¬ìš©ì ìœ„ì¹˜ ë§ˆì»¤ ì¶”ê°€\nif(userLat&&userLng){const userMarker=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(userLat,userLng),image:new window.kakao.maps.MarkerImage('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',new window.kakao.maps.Size(30,30))});userMarker.setMap(map);setUserMarker(userMarker);}}else{// ì¹´ì¹´ì˜¤ë§µ APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ 1ì´ˆ í›„ ë‹¤ì‹œ ì‹œë„\nsetTimeout(()=>initKakaoMapWithLocation(userLat,userLng),1000);}};// í˜ì´ì§€ ë¡œë“œ í›„ ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° ë° ì§€ë„ ì´ˆê¸°í™”\nconst timer=setTimeout(getUserLocationForMap,1000);return()=>clearTimeout(timer);},[]);// ë‘ ì§€ì  ê°„ì˜ ê±°ë¦¬ ê³„ì‚° (í•˜ë²„ì‚¬ì¸ ê³µì‹)\nconst calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371;// ì§€êµ¬ì˜ ë°˜ì§€ë¦„ (km)\nconst dLat=(lat2-lat1)*Math.PI/180;const dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));const distance=R*c;// km\nreturn distance;};// ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°\nconst getUserLocation=()=>{if(!navigator.geolocation){alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');return;}setIsLoadingLocation(true);navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;const newUserLocation={lat:latitude,lng:longitude};setUserLocation(newUserLocation);// ì§€ë„ê°€ ë¡œë“œëœ í›„ì—ë§Œ ì¤‘ì‹¬ ì´ë™\nif(mapInstance){// ê¸°ì¡´ ì‚¬ìš©ì ë§ˆì»¤ ì œê±°\nif(userMarker){userMarker.setMap(null);}// ì‚¬ìš©ì ìœ„ì¹˜ë¡œ ì§€ë„ ì¤‘ì‹¬ ì´ë™\nmapInstance.setCenter(new window.kakao.maps.LatLng(latitude,longitude));mapInstance.setLevel(5);// ìƒˆë¡œìš´ ì‚¬ìš©ì ìœ„ì¹˜ ë§ˆì»¤ ì¶”ê°€\nconst newUserMarker=new window.kakao.maps.Marker({position:new window.kakao.maps.LatLng(latitude,longitude),image:new window.kakao.maps.MarkerImage('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',new window.kakao.maps.Size(30,30))});newUserMarker.setMap(mapInstance);setUserMarker(newUserMarker);}// ê°€ê¹Œìš´ ì‹ë‹¹ ì°¾ê¸° (3km ì´ë‚´)\nconst restaurantsWithDistance=restaurants.map(restaurant=>{const distance=calculateDistance(latitude,longitude,restaurant.position.lat,restaurant.position.lng);return{...restaurant,distance:distance};});const nearby=restaurantsWithDistance.filter(restaurant=>restaurant.distance<=3).sort((a,b)=>a.distance-b.distance);setNearbyRestaurants(nearby);setIsLoadingLocation(false);},error=>{let errorMessage='ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';switch(error.code){case error.PERMISSION_DENIED:errorMessage='ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.';break;case error.POSITION_UNAVAILABLE:errorMessage='ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';break;case error.TIMEOUT:errorMessage='ìœ„ì¹˜ ì •ë³´ ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.';break;}alert(errorMessage);setIsLoadingLocation(false);},{enableHighAccuracy:true,timeout:10000,maximumAge:300000// 5ë¶„\n});};const getCategoryColor=category=>{const colors={'í•œì‹':'#ff6b6b','ì–‘ì‹':'#4ecdc4','ì¼ì‹':'#45b7d1','ì¤‘ì‹':'#96ceb4','ë™ë‚¨ì•„ì‹':'#feca57','ì¹´í˜':'#ff9ff3'};return colors[category]||'#95a5a6';};// í˜„ì¬ ì‹œê°„ì´ ì˜ì—…ì‹œê°„ì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\nconst isCurrentlyOpen=businessHours=>{if(!businessHours)return false;const now=new Date();const currentTime=now.getHours()*100+now.getMinutes();// ê°„ë‹¨í•œ ì‹œê°„ íŒŒì‹± (ì˜ˆ: \"11:00 - 22:00\")\nconst timeMatch=businessHours.match(/(\\d{1,2}):(\\d{2})\\s*-\\s*(\\d{1,2}):(\\d{2})/);if(!timeMatch)return true;// íŒŒì‹±í•  ìˆ˜ ì—†ìœ¼ë©´ ì˜ì—… ì¤‘ìœ¼ë¡œ ê°„ì£¼\nconst openHour=parseInt(timeMatch[1]);const openMinute=parseInt(timeMatch[2]);const closeHour=parseInt(timeMatch[3]);const closeMinute=parseInt(timeMatch[4]);const openTime=openHour*100+openMinute;const closeTime=closeHour*100+closeMinute;return currentTime>=openTime&&currentTime<=closeTime;};// í‰ì ì„ ë³„ë¡œ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜\nconst renderStars=rating=>{const stars=[];for(let i=1;i<=5;i++){stars.push(/*#__PURE__*/_jsx(\"span\",{className:`star ${i<=rating?'filled':''}`,children:\"\\u2605\"},i));}return stars;};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDDFA\\uFE0F \\uC778\\uC290\\uB7AD \\uB9DB\\uC9D1 \\uC9C0\\uB3C4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC9C0\\uC5ED\\uBA85, \\uB9DB\\uC9D1 \\uC774\\uB984\\uC73C\\uB85C \\uAC80\\uC0C9...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-input\"}),searchQuery&&/*#__PURE__*/_jsx(\"button\",{onClick:clearSearch,className:\"clear-search-btn\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"results-count\",children:[filteredRestaurants.length,\"\\uAC1C\\uC758 \\uB9DB\\uC9D1\\uC774 \\uAC80\\uC0C9\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDF7D\\uFE0F \\uC74C\\uC2DD \\uC885\\uB958 \\uD544\\uD130\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleAllCategories,className:\"toggle-all-btn\",children:selectedCategories.length===categories.length?'ì „ì²´ í•´ì œ':'ì „ì²´ ì„ íƒ'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"category-filters\",children:categories.map(category=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleCategory(category),className:`category-filter-btn ${selectedCategories.includes(category)?'active':''}`,children:[getCategoryIcon(category),\" \",category]},category))}),/*#__PURE__*/_jsxs(\"div\",{className:\"marker-status-filters\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83C\\uDF1F \\uB9DB\\uC9D1 \\uC0C1\\uD0DC \\uD544\\uD130\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleAllMarkerStatus,className:\"toggle-all-btn\",children:selectedMarkerStatus.length===markerStatusOptions.length?'ì „ì²´ í•´ì œ':'ì „ì²´ ì„ íƒ'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"marker-status-options\",children:markerStatusOptions.map(option=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleMarkerStatus(option.value),className:`marker-status-option ${selectedMarkerStatus.includes(option.value)?'active':''}`,\"data-status\":option.value,children:option.label},option.value))}),selectedRestaurant&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-restaurant-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB \\uC120\\uD0DD\\uB41C \\uB9DB\\uC9D1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-card\",children:[/*#__PURE__*/_jsx(\"h5\",{children:selectedRestaurant.name}),/*#__PURE__*/_jsx(\"p\",{className:\"restaurant-category\",children:selectedRestaurant.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-rating\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stars\",children:renderStars(selectedRestaurant.rating)}),/*#__PURE__*/_jsx(\"span\",{className:\"rating-text\",children:selectedRestaurant.rating})]}),/*#__PURE__*/_jsx(\"p\",{className:\"restaurant-description\",children:selectedRestaurant.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCCD \",selectedRestaurant.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCB0 \",selectedRestaurant.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD52 \",selectedRestaurant.businessHours]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCDE \",selectedRestaurant.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDE97 \",selectedRestaurant.parking]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:`favorite-btn ${isInFavorites(selectedRestaurant.id)?'favorited':''}`,onClick:()=>{if(isInFavorites(selectedRestaurant.id)){removeFromFavorites(selectedRestaurant.id);alert('ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘‹');}else{addToFavorites(selectedRestaurant);alert('ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');}},children:isInFavorites(selectedRestaurant.id)?'â¤ï¸ ì°œë¨':'ğŸ¤ ì°œí•˜ê¸°'})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-section\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:'100%',height:'100%'}}),/*#__PURE__*/_jsx(\"div\",{className:\"map-location-overlay\",children:/*#__PURE__*/_jsx(\"button\",{className:`location-btn ${isLoadingLocation?'loading':''}`,onClick:getUserLocation,disabled:isLoadingLocation,children:isLoadingLocation?'ğŸ“ ìœ„ì¹˜ í™•ì¸ ì¤‘...':'ğŸ“ ë‚´ ìœ„ì¹˜ë¡œ ì´ë™'})}),miniPopup&&/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup\",style:{left:`${popupPosition.x}px`,top:`${popupPosition.y}px`},onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:miniPopup.name}),/*#__PURE__*/_jsx(\"button\",{className:\"close-popup-btn\",onClick:()=>setMiniPopup(null),children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup-rating\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stars\",children:renderStars(miniPopup.rating)}),/*#__PURE__*/_jsx(\"span\",{className:\"rating-text\",children:miniPopup.rating})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup-info\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"category\",children:[\"\\uD83C\\uDF7D\\uFE0F \",miniPopup.category]}),/*#__PURE__*/_jsx(\"p\",{className:`business-status ${isCurrentlyOpen(miniPopup.businessHours)?'open':'closed'}`,children:isCurrentlyOpen(miniPopup.businessHours)?'ğŸŸ¢ ì˜ì—… ì¤‘':'ğŸ”´ ì˜ì—… ì¢…ë£Œ'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mini-popup-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:`favorite-btn ${isInFavorites(miniPopup.id)?'favorited':''}`,onClick:()=>{if(isInFavorites(miniPopup.id)){removeFromFavorites(miniPopup.id);alert('ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘‹');}else{addToFavorites(miniPopup);alert('ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');}setMiniPopup(null);},children:isInFavorites(miniPopup.id)?'â¤ï¸ ì°œë¨':'ğŸ¤ ì°œí•˜ê¸°'}),/*#__PURE__*/_jsx(\"button\",{className:\"detail-btn\",onClick:()=>{setDetailModal(miniPopup);setMiniPopup(null);},children:\"\\uD83D\\uDCCB \\uC0C1\\uC138\\uBCF4\\uAE30\"})]})]})]})]})]}),detailModal&&/*#__PURE__*/_jsx(RestaurantDetailModal,{restaurant:detailModal,onClose:()=>setDetailModal(null)})]});}export default KakaoMap;","map":{"version":3,"names":["React","useState","useEffect","useFavorites","useVisit","useSearchParams","RestaurantDetailModal","jsx","_jsx","jsxs","_jsxs","KakaoMap","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","addToFavorites","removeFromFavorites","isInFavorites","getRestaurantVisitStatus","setRestaurantVisitStatus","mapLoaded","setMapLoaded","userLocation","setUserLocation","nearbyRestaurants","setNearbyRestaurants","userMarker","setUserMarker","isLoadingLocation","setIsLoadingLocation","searchParams","mapInstance","setMapInstance","searchQuery","setSearchQuery","selectedCategories","setSelectedCategories","filteredRestaurants","setFilteredRestaurants","markers","setMarkers","labels","setLabels","selectedMarkerStatus","setSelectedMarkerStatus","miniPopup","setMiniPopup","popupPosition","setPopupPosition","x","y","isDragging","setIsDragging","dragOffset","setDragOffset","detailModal","setDetailModal","handleMouseDown","e","clientX","clientY","handleMouseMove","handleMouseUp","categories","markerStatusOptions","value","label","color","icon","fetchRestaurants","response","fetch","ok","data","json","formattedData","map","restaurant","id","name","category","cuisine","rating","address","description","price","position","lat","latitude","lng","longitude","hours","businessHours","phone","parking","console","error","defaultData","filtered","trim","filter","toLowerCase","includes","visitStatus","updateMapMarkers","restaurantsToShow","forEach","marker","setMap","newMarkers","newLabels","markerColor","markerIcon","getCategoryIcon","window","kakao","maps","Marker","LatLng","image","MarkerImage","createMarkerImage","Size","push","content","CustomOverlay","xAnchor","yAnchor","event","addListener","projection","getProjection","point","pointFromCoords","canvas","document","createElement","width","height","ctx","getContext","beginPath","arc","Math","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","font","textAlign","textBaseline","fillText","toDataURL","restaurantId","get","find","toString","setTimeout","toggleCategory","prev","c","toggleAllCategories","length","clearSearch","icons","toggleMarkerStatus","status","s","toggleAllMarkerStatus","option","getUserLocationForMap","navigator","geolocation","getCurrentPosition","coords","newUserLocation","initKakaoMapWithLocation","log","userLat","arguments","undefined","userLng","container","getElementById","centerLat","centerLng","parseFloat","options","center","level","Map","timer","clearTimeout","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","dLon","a","sin","cos","atan2","sqrt","distance","getUserLocation","alert","setCenter","setLevel","newUserMarker","restaurantsWithDistance","nearby","sort","b","errorMessage","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","enableHighAccuracy","timeout","maximumAge","getCategoryColor","colors","isCurrentlyOpen","now","Date","currentTime","getHours","getMinutes","timeMatch","match","openHour","parseInt","openMinute","closeHour","closeMinute","openTime","closeTime","renderStars","stars","i","className","children","type","placeholder","onChange","target","onClick","style","disabled","left","top","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onClose"],"sources":["/Users/ingtto/Documents/GitHub/ingchelin/src/pages/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useFavorites } from '../context/FavoriteContext';\nimport { useVisit } from '../context/VisitContext';\nimport { useSearchParams } from 'react-router-dom';\nimport RestaurantDetailModal from '../components/RestaurantDetailModal';\nimport './Map.css';\n\nfunction KakaoMap() {\n  const [restaurants, setRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const { addToFavorites, removeFromFavorites, isInFavorites } = useFavorites();\n  const { getRestaurantVisitStatus, setRestaurantVisitStatus } = useVisit();\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbyRestaurants, setNearbyRestaurants] = useState([]);\n  const [userMarker, setUserMarker] = useState(null);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\n  const [searchParams] = useSearchParams();\n  const [mapInstance, setMapInstance] = useState(null);\n  \n  // ìƒˆë¡œìš´ ìƒíƒœë“¤\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategories, setSelectedCategories] = useState(['í•œì‹', 'ì¤‘ì‹', 'ì¼ì‹', 'ì–‘ì‹', 'ë¶„ì‹', 'íƒœêµ­', 'ìˆ ', 'ì¹´í˜', 'ë””ì €íŠ¸']);\n  const [filteredRestaurants, setFilteredRestaurants] = useState([]);\n  \n  // ë§ˆì»¤ ìƒíƒœ ì¶”ê°€\n  const [markers, setMarkers] = useState([]);\n  const [labels, setLabels] = useState([]);\n  \n  // ë§ˆì»¤ ìƒíƒœ í•„í„° ì¶”ê°€\n  const [selectedMarkerStatus, setSelectedMarkerStatus] = useState(['favorited', 'liked', 'disliked', 'not-visited']);\n  \n  // ë¯¸ë‹ˆ íŒì—… ìƒíƒœ ì¶”ê°€\n  const [miniPopup, setMiniPopup] = useState(null);\n  const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  \n  // ìƒì„¸ì •ë³´ ëª¨ë‹¬ ìƒíƒœ ì¶”ê°€\n  const [detailModal, setDetailModal] = useState(null);\n\n\n\n  // ë“œë˜ê·¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\n  const handleMouseDown = (e) => {\n    setIsDragging(true);\n    setDragOffset({\n      x: e.clientX - popupPosition.x,\n      y: e.clientY - popupPosition.y\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (isDragging) {\n      setPopupPosition({\n        x: e.clientX - dragOffset.x,\n        y: e.clientY - dragOffset.y\n      });\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // ì¹´í…Œê³ ë¦¬ ì˜µì…˜\n  const categories = ['í•œì‹', 'ì¤‘ì‹', 'ì¼ì‹', 'ì–‘ì‹', 'ë¶„ì‹', 'íƒœêµ­', 'ìˆ ', 'ì¹´í˜', 'ë””ì €íŠ¸'];\n  \n  // ë§ˆì»¤ ìƒíƒœ ì˜µì…˜\n  const markerStatusOptions = [\n    { value: 'favorited', label: 'ì°œí•œ ë§›ì§‘', color: '#FF3B30', icon: 'â¤ï¸' },\n    { value: 'liked', label: 'ë°©ë¬¸í•œ ê³³ (ì¢‹ì•˜ë˜ ê³³)', color: '#007AFF', icon: 'ğŸ‘' },\n    { value: 'disliked', label: 'ë°©ë¬¸í•œ ê³³ (ë³„ë¡œì¸ ê³³)', color: '#8E8E93', icon: 'ğŸ‘' },\n    { value: 'not-visited', label: 'ì•ˆ ê°€ë³¸ ê³³', color: '#FF6B6B', icon: 'â“' }\n  ];\n\n  // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë ˆìŠ¤í† ë‘ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n  const fetchRestaurants = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/restaurants');\n      if (response.ok) {\n        const data = await response.json();\n        // ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì§€ë„ í˜•ì‹ì— ë§ê²Œ ë³€í™˜\n        const formattedData = data.map(restaurant => ({\n          id: restaurant.id,\n          name: restaurant.name,\n          category: restaurant.cuisine,\n          rating: restaurant.rating || 4.0,\n          address: restaurant.address,\n          description: restaurant.description || `${restaurant.cuisine} ì „ë¬¸ì ì…ë‹ˆë‹¤.`,\n          price: restaurant.price || \"1ë§Œì›~3ë§Œì›\",\n          position: { \n            lat: restaurant.latitude || 37.5665, \n            lng: restaurant.longitude || 126.9780 \n          },\n          hours: restaurant.businessHours || \"11:00 - 22:00\",\n          phone: restaurant.phone || \"02-0000-0000\",\n          parking: restaurant.parking || \"ì£¼ì°¨ ê°€ëŠ¥\"\n        }));\n        setRestaurants(formattedData);\n        setFilteredRestaurants(formattedData);\n      } else {\n        console.error('ë ˆìŠ¤í† ë‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');\n        // ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©\n        const defaultData = [\n          {\n            id: 1,\n            name: \"ë§›ìˆëŠ” í•œì‹ì§‘\",\n            category: \"í•œì‹\",\n            rating: 4.5,\n            address: \"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123\",\n            description: \"ì „í†µ í•œì‹ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",\n            price: \"1ë§Œì›~3ë§Œì›\",\n            position: { lat: 37.5665, lng: 126.9780 },\n            hours: \"11:00 - 22:00\",\n            phone: \"02-1234-5678\",\n            parking: \"ì£¼ì°¨ ê°€ëŠ¥\"\n          },\n          {\n            id: 2,\n            name: \"ì‹ ì„ í•œ ì¼ì‹ì§‘\",\n            category: \"ì¼ì‹\",\n            rating: 4.3,\n            address: \"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 456\",\n            description: \"ì‹ ì„ í•œ íšŒì™€ ì´ˆë°¥ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",\n            price: \"2ë§Œì›~5ë§Œì›\",\n            position: { lat: 37.5668, lng: 126.9785 },\n            hours: \"11:30 - 22:30\",\n            phone: \"02-2345-6789\",\n            parking: \"ì£¼ì°¨ ë¶ˆê°€\"\n          }\n        ];\n        setRestaurants(defaultData);\n        setFilteredRestaurants(defaultData);\n      }\n    } catch (error) {\n      console.error('ë ˆìŠ¤í† ë‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n      // ì—ëŸ¬ ì‹œì—ë„ ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©\n      const defaultData = [\n        {\n          id: 1,\n          name: \"ë§›ìˆëŠ” í•œì‹ì§‘\",\n          category: \"í•œì‹\",\n          rating: 4.5,\n          address: \"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123\",\n          description: \"ì „í†µ í•œì‹ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",\n          price: \"1ë§Œì›~3ë§Œì›\",\n          position: { lat: 37.5665, lng: 126.9780 },\n          hours: \"11:00 - 22:00\",\n          phone: \"02-1234-5678\",\n          parking: \"ì£¼ì°¨ ê°€ëŠ¥\"\n        },\n        {\n          id: 2,\n          name: \"ì‹ ì„ í•œ ì¼ì‹ì§‘\",\n          category: \"ì¼ì‹\",\n          rating: 4.3,\n          address: \"ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 456\",\n          description: \"ì‹ ì„ í•œ íšŒì™€ ì´ˆë°¥ ì „ë¬¸ì ì…ë‹ˆë‹¤.\",\n          price: \"2ë§Œì›~5ë§Œì›\",\n          position: { lat: 37.5668, lng: 126.9785 },\n          hours: \"11:30 - 22:30\",\n          phone: \"02-2345-6789\",\n          parking: \"ì£¼ì°¨ ë¶ˆê°€\"\n        }\n      ];\n      setRestaurants(defaultData);\n      setFilteredRestaurants(defaultData);\n    }\n  };\n\n  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n  useEffect(() => {\n    fetchRestaurants();\n  }, []);\n\n  // ê²€ìƒ‰ ë° í•„í„°ë§ í•¨ìˆ˜\n  useEffect(() => {\n    let filtered = restaurants;\n    \n    // ê²€ìƒ‰ì–´ í•„í„°ë§\n    if (searchQuery.trim()) {\n      filtered = filtered.filter(restaurant => \n        restaurant.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        restaurant.address.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        restaurant.category.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n    \n    // ì¹´í…Œê³ ë¦¬ í•„í„°ë§\n    filtered = filtered.filter(restaurant => \n      selectedCategories.includes(restaurant.category)\n    );\n    \n    // ë§ˆì»¤ ìƒíƒœ í•„í„°ë§\n    filtered = filtered.filter(restaurant => {\n      if (isInFavorites(restaurant.id)) {\n        return selectedMarkerStatus.includes('favorited');\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          return selectedMarkerStatus.includes('liked');\n        } else if (visitStatus === 'disliked') {\n          return selectedMarkerStatus.includes('disliked');\n        } else {\n          return selectedMarkerStatus.includes('not-visited');\n        }\n      }\n    });\n    \n    setFilteredRestaurants(filtered);\n  }, [restaurants, searchQuery, selectedCategories, selectedMarkerStatus]);\n\n  // ë§ˆì»¤ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\n  const updateMapMarkers = (restaurantsToShow) => {\n    if (!mapInstance) return;\n\n    // ê¸°ì¡´ ë§ˆì»¤ì™€ ë¼ë²¨ ì œê±°\n    markers.forEach(marker => marker.setMap(null));\n    labels.forEach(label => label.setMap(null));\n\n    const newMarkers = [];\n    const newLabels = [];\n\n    // ìƒˆë¡œìš´ ë§ˆì»¤ì™€ ë¼ë²¨ ì¶”ê°€\n    restaurantsToShow.forEach((restaurant) => {\n      // ë§ˆì»¤ ìƒ‰ìƒ ê²°ì •\n      let markerColor = '#FF6B6B'; // ê¸°ë³¸ ìƒ‰ìƒ\n      let markerIcon = getCategoryIcon(restaurant.category);\n      \n      // ìƒíƒœë³„ ìƒ‰ìƒ ì ìš©\n      if (isInFavorites(restaurant.id)) {\n        markerColor = '#FF3B30'; // ì°œí•œ ë§›ì§‘ - ë¹¨ê°„ìƒ‰\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          markerColor = '#007AFF'; // ë°©ë¬¸í•œ ê³³ (ì¢‹ì•˜ë˜ ê³³) - íŒŒë€ìƒ‰\n        } else if (visitStatus === 'disliked') {\n          markerColor = '#8E8E93'; // ë°©ë¬¸í•œ ê³³ (ë³„ë¡œì¸ ê³³) - íšŒìƒ‰\n        }\n      }\n\n      // ì¹´í…Œê³ ë¦¬ë³„ ì•„ì´ì½˜ê³¼ ìƒ‰ìƒìœ¼ë¡œ ë§ˆì»¤ ìƒì„±\n      const marker = new window.kakao.maps.Marker({\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        image: new window.kakao.maps.MarkerImage(\n          createMarkerImage(markerColor, markerIcon),\n          new window.kakao.maps.Size(40, 40)\n        )\n      });\n      \n      marker.setMap(mapInstance);\n      newMarkers.push(marker);\n      \n      // ë§ˆì»¤ ìœ„ì— ì‹ë‹¹ ì´ë¦„ë§Œ í‘œì‹œí•˜ëŠ” ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´\n      const content = `\n        <div class=\"marker-label\">\n          <div class=\"marker-label-content\">\n            ${restaurant.name}\n          </div>\n        </div>\n      `;\n      \n      const label = new window.kakao.maps.CustomOverlay({\n        content: content,\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        xAnchor: 0.5,\n        yAnchor: 1.5\n      });\n      \n      label.setMap(mapInstance);\n      newLabels.push(label);\n      \n      // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸\n      window.kakao.maps.event.addListener(marker, 'click', () => {\n        setSelectedRestaurant(restaurant);\n        \n        // ë¯¸ë‹ˆ íŒì—… í‘œì‹œ - ì§€ë„ ì»¨í…Œì´ë„ˆ ë‚´ ìƒëŒ€ì  ìœ„ì¹˜ë¡œ ê³„ì‚°\n        const position = new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng);\n        const projection = mapInstance.getProjection();\n        const point = projection.pointFromCoords(position);\n        \n        setMiniPopup(restaurant);\n        setPopupPosition({\n          x: point.x,\n          y: point.y - 80 // ë§ˆì»¤ ìœ„ì— í‘œì‹œ\n        });\n      });\n    });\n\n    setMarkers(newMarkers);\n    setLabels(newLabels);\n  };\n\n  // ë§ˆì»¤ ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜\n  const createMarkerImage = (color, icon) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 40;\n    canvas.height = 40;\n    const ctx = canvas.getContext('2d');\n    \n    // ì›í˜• ë°°ê²½ ê·¸ë¦¬ê¸°\n    ctx.beginPath();\n    ctx.arc(20, 20, 18, 0, 2 * Math.PI);\n    ctx.fillStyle = color;\n    ctx.fill();\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 2;\n    ctx.stroke();\n    \n    // ì•„ì´ì½˜ í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°\n    ctx.fillStyle = 'white';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(icon, 20, 20);\n    \n    return canvas.toDataURL();\n  };\n\n  // í•„í„°ë§ëœ ë ˆìŠ¤í† ë‘ì´ ë³€ê²½ë  ë•Œ ë§ˆì»¤ ì—…ë°ì´íŠ¸\n  useEffect(() => {\n    if (mapLoaded && mapInstance) {\n      updateMapMarkers(filteredRestaurants);\n      \n      // URL íŒŒë¼ë¯¸í„°ë¡œ íŠ¹ì • ì‹ë‹¹ì´ ì§€ì •ëœ ê²½ìš° í•´ë‹¹ ì‹ë‹¹ ì •ë³´ í‘œì‹œ\n      const restaurantId = searchParams.get('restaurantId');\n      if (restaurantId) {\n        const selectedRestaurant = filteredRestaurants.find(\n          restaurant => restaurant.id.toString() === restaurantId\n        );\n        if (selectedRestaurant) {\n          setTimeout(() => {\n            setSelectedRestaurant(selectedRestaurant);\n          }, 1000);\n        }\n      }\n    }\n  }, [filteredRestaurants, mapLoaded, mapInstance, searchParams]);\n\n  // ì¹´í…Œê³ ë¦¬ í† ê¸€ í•¨ìˆ˜\n  const toggleCategory = (category) => {\n    setSelectedCategories(prev => \n      prev.includes(category) \n        ? prev.filter(c => c !== category)\n        : [...prev, category]\n    );\n  };\n\n  // ëª¨ë“  ì¹´í…Œê³ ë¦¬ í† ê¸€ í•¨ìˆ˜\n  const toggleAllCategories = () => {\n    setSelectedCategories(selectedCategories.length === categories.length ? [] : categories);\n  };\n\n  // ê²€ìƒ‰ì–´ ì´ˆê¸°í™” í•¨ìˆ˜\n  const clearSearch = () => {\n    setSearchQuery('');\n  };\n\n  // ì¹´í…Œê³ ë¦¬ ì•„ì´ì½˜ ë°˜í™˜ í•¨ìˆ˜\n  const getCategoryIcon = (category) => {\n    const icons = {\n      'í•œì‹': 'ğŸš',\n      'ì–‘ì‹': 'ğŸ',\n      'ì¼ì‹': 'ğŸ£',\n      'ì¤‘ì‹': 'ğŸ¥¢',\n      'ì¹´í˜': 'â˜•',\n      'ë””ì €íŠ¸': 'ğŸ°',\n      'ë¶„ì‹': 'ğŸ¡',\n      'ìˆ ': 'ğŸº',\n      'íƒœêµ­': 'ğŸœ'\n    };\n    return icons[category] || 'ğŸ½ï¸';\n  };\n\n  // ë§ˆì»¤ ìƒíƒœ í† ê¸€ í•¨ìˆ˜\n  const toggleMarkerStatus = (status) => {\n    setSelectedMarkerStatus(prev => \n      prev.includes(status) \n        ? prev.filter(s => s !== status)\n        : [...prev, status]\n    );\n  };\n\n  // ëª¨ë“  ë§ˆì»¤ ìƒíƒœ í† ê¸€ í•¨ìˆ˜\n  const toggleAllMarkerStatus = () => {\n    setSelectedMarkerStatus(selectedMarkerStatus.length === markerStatusOptions.length ? [] : markerStatusOptions.map(option => option.value));\n  };\n\n  useEffect(() => {\n    // ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë ˆìŠ¤í† ë‘ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n    fetchRestaurants();\n\n    // URL íŒŒë¼ë¯¸í„° í™•ì¸\n    const restaurantId = searchParams.get('restaurantId');\n    const lat = searchParams.get('lat');\n    const lng = searchParams.get('lng');\n\n    // ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°\n    const getUserLocationForMap = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            const { latitude, longitude } = position.coords;\n            const newUserLocation = { lat: latitude, lng: longitude };\n            setUserLocation(newUserLocation);\n            \n            // ì‚¬ìš©ì ìœ„ì¹˜ë¡œ ì§€ë„ ì´ˆê¸°í™”\n            initKakaoMapWithLocation(latitude, longitude);\n          },\n          (error) => {\n            console.log('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', error);\n            // ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìœ¼ë©´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì´ˆê¸°í™”\n            initKakaoMapWithLocation();\n          }\n        );\n      } else {\n        // ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì´ˆê¸°í™”\n        initKakaoMapWithLocation();\n      }\n    };\n\n    // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” (ìœ„ì¹˜ ì •ë³´ í¬í•¨)\n    const initKakaoMapWithLocation = (userLat = null, userLng = null) => {\n      if (window.kakao && window.kakao.maps) {\n        const container = document.getElementById('map');\n        \n        // ìš°ì„ ìˆœìœ„: URL íŒŒë¼ë¯¸í„° > ì‚¬ìš©ì ìœ„ì¹˜ > ê¸°ë³¸ ìœ„ì¹˜\n        let centerLat, centerLng;\n        if (lat && lng) {\n          centerLat = parseFloat(lat);\n          centerLng = parseFloat(lng);\n        } else if (userLat && userLng) {\n          centerLat = userLat;\n          centerLng = userLng;\n        } else {\n          centerLat = 37.3520; // ì •ìë™ ì¤‘ì‹¬\n          centerLng = 127.1087;\n        }\n        \n        const options = {\n          center: new window.kakao.maps.LatLng(centerLat, centerLng),\n          level: restaurantId ? 3 : 6\n        };\n        \n        const map = new window.kakao.maps.Map(container, options);\n        setMapInstance(map);\n        setMapLoaded(true);\n        \n        // ì´ˆê¸° ë§ˆì»¤ ì„¤ì • (ì „ì²´ ë ˆìŠ¤í† ë‘)\n        updateMapMarkers(restaurants);\n\n        // ì‚¬ìš©ì ìœ„ì¹˜ ë§ˆì»¤ ì¶”ê°€\n        if (userLat && userLng) {\n          const userMarker = new window.kakao.maps.Marker({\n            position: new window.kakao.maps.LatLng(userLat, userLng),\n            image: new window.kakao.maps.MarkerImage(\n              'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',\n              new window.kakao.maps.Size(30, 30)\n            )\n          });\n          \n          userMarker.setMap(map);\n          setUserMarker(userMarker);\n        }\n      } else {\n        // ì¹´ì¹´ì˜¤ë§µ APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ 1ì´ˆ í›„ ë‹¤ì‹œ ì‹œë„\n        setTimeout(() => initKakaoMapWithLocation(userLat, userLng), 1000);\n      }\n    };\n\n    // í˜ì´ì§€ ë¡œë“œ í›„ ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° ë° ì§€ë„ ì´ˆê¸°í™”\n    const timer = setTimeout(getUserLocationForMap, 1000);\n    \n    return () => clearTimeout(timer);\n  }, []);\n\n  // ë‘ ì§€ì  ê°„ì˜ ê±°ë¦¬ ê³„ì‚° (í•˜ë²„ì‚¬ì¸ ê³µì‹)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // ì§€êµ¬ì˜ ë°˜ì§€ë¦„ (km)\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \n      Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    const distance = R * c; // km\n    return distance;\n  };\n\n  // ì‚¬ìš©ì ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°\n  const getUserLocation = () => {\n    if (!navigator.geolocation) {\n      alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');\n      return;\n    }\n\n    setIsLoadingLocation(true);\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        const newUserLocation = { lat: latitude, lng: longitude };\n        setUserLocation(newUserLocation);\n        \n        // ì§€ë„ê°€ ë¡œë“œëœ í›„ì—ë§Œ ì¤‘ì‹¬ ì´ë™\n        if (mapInstance) {\n          // ê¸°ì¡´ ì‚¬ìš©ì ë§ˆì»¤ ì œê±°\n          if (userMarker) {\n            userMarker.setMap(null);\n          }\n          \n          // ì‚¬ìš©ì ìœ„ì¹˜ë¡œ ì§€ë„ ì¤‘ì‹¬ ì´ë™\n          mapInstance.setCenter(new window.kakao.maps.LatLng(latitude, longitude));\n          mapInstance.setLevel(5);\n          \n          // ìƒˆë¡œìš´ ì‚¬ìš©ì ìœ„ì¹˜ ë§ˆì»¤ ì¶”ê°€\n          const newUserMarker = new window.kakao.maps.Marker({\n            position: new window.kakao.maps.LatLng(latitude, longitude),\n            image: new window.kakao.maps.MarkerImage(\n              'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',\n              new window.kakao.maps.Size(30, 30)\n            )\n          });\n          \n          newUserMarker.setMap(mapInstance);\n          setUserMarker(newUserMarker);\n        }\n        \n        // ê°€ê¹Œìš´ ì‹ë‹¹ ì°¾ê¸° (3km ì´ë‚´)\n        const restaurantsWithDistance = restaurants.map(restaurant => {\n          const distance = calculateDistance(\n            latitude, \n            longitude, \n            restaurant.position.lat, \n            restaurant.position.lng\n          );\n          return {\n            ...restaurant,\n            distance: distance\n          };\n        });\n\n        const nearby = restaurantsWithDistance\n          .filter(restaurant => restaurant.distance <= 3)\n          .sort((a, b) => a.distance - b.distance);\n\n        setNearbyRestaurants(nearby);\n        setIsLoadingLocation(false);\n      },\n      (error) => {\n        let errorMessage = 'ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n        switch(error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'ìœ„ì¹˜ ì •ë³´ ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.';\n            break;\n        }\n        alert(errorMessage);\n        setIsLoadingLocation(false);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 300000 // 5ë¶„\n      }\n    );\n  };\n\n  const getCategoryColor = (category) => {\n    const colors = {\n      'í•œì‹': '#ff6b6b',\n      'ì–‘ì‹': '#4ecdc4',\n      'ì¼ì‹': '#45b7d1',\n      'ì¤‘ì‹': '#96ceb4',\n      'ë™ë‚¨ì•„ì‹': '#feca57',\n      'ì¹´í˜': '#ff9ff3'\n    };\n    return colors[category] || '#95a5a6';\n  };\n\n  // í˜„ì¬ ì‹œê°„ì´ ì˜ì—…ì‹œê°„ì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜\n  const isCurrentlyOpen = (businessHours) => {\n    if (!businessHours) return false;\n    \n    const now = new Date();\n    const currentTime = now.getHours() * 100 + now.getMinutes();\n    \n    // ê°„ë‹¨í•œ ì‹œê°„ íŒŒì‹± (ì˜ˆ: \"11:00 - 22:00\")\n    const timeMatch = businessHours.match(/(\\d{1,2}):(\\d{2})\\s*-\\s*(\\d{1,2}):(\\d{2})/);\n    if (!timeMatch) return true; // íŒŒì‹±í•  ìˆ˜ ì—†ìœ¼ë©´ ì˜ì—… ì¤‘ìœ¼ë¡œ ê°„ì£¼\n    \n    const openHour = parseInt(timeMatch[1]);\n    const openMinute = parseInt(timeMatch[2]);\n    const closeHour = parseInt(timeMatch[3]);\n    const closeMinute = parseInt(timeMatch[4]);\n    \n    const openTime = openHour * 100 + openMinute;\n    const closeTime = closeHour * 100 + closeMinute;\n    \n    return currentTime >= openTime && currentTime <= closeTime;\n  };\n\n  // í‰ì ì„ ë³„ë¡œ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜\n  const renderStars = (rating) => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <span key={i} className={`star ${i <= rating ? 'filled' : ''}`}>\n          â˜…\n        </span>\n      );\n    }\n    return stars;\n  };\n\n  return (\n    <div className=\"map-container\">\n      {/* ìƒë‹¨ ê²€ìƒ‰ ì˜ì—­ */}\n      <div className=\"map-header\">\n        <h2>ğŸ—ºï¸ ì¸ìŠë­ ë§›ì§‘ ì§€ë„</h2>\n        \n        {/* ê²€ìƒ‰ì°½ */}\n        <div className=\"search-section\">\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              placeholder=\"ì§€ì—­ëª…, ë§›ì§‘ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"search-input\"\n            />\n            {searchQuery && (\n              <button onClick={clearSearch} className=\"clear-search-btn\">\n                âœ•\n              </button>\n            )}\n          </div>\n          <div className=\"search-results\">\n            <span className=\"results-count\">\n              {filteredRestaurants.length}ê°œì˜ ë§›ì§‘ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"map-content\">\n        {/* ì™¼ìª½ í•„í„° íŒ¨ë„ */}\n        <div className=\"filter-panel\">\n          <div className=\"filter-header\">\n            <h3>ğŸ½ï¸ ìŒì‹ ì¢…ë¥˜ í•„í„°</h3>\n            <button \n              onClick={toggleAllCategories}\n              className=\"toggle-all-btn\"\n            >\n              {selectedCategories.length === categories.length ? 'ì „ì²´ í•´ì œ' : 'ì „ì²´ ì„ íƒ'}\n            </button>\n          </div>\n          <div className=\"category-filters\">\n            {categories.map(category => (\n              <button\n                key={category}\n                onClick={() => toggleCategory(category)}\n                className={`category-filter-btn ${selectedCategories.includes(category) ? 'active' : ''}`}\n              >\n                {getCategoryIcon(category)} {category}\n              </button>\n            ))}\n          </div>\n          \n          {/* ë§ˆì»¤ ìƒíƒœ í•„í„° */}\n          <div className=\"marker-status-filters\">\n            <h4>ğŸŒŸ ë§›ì§‘ ìƒíƒœ í•„í„°</h4>\n            <button \n              onClick={toggleAllMarkerStatus}\n              className=\"toggle-all-btn\"\n            >\n              {selectedMarkerStatus.length === markerStatusOptions.length ? 'ì „ì²´ í•´ì œ' : 'ì „ì²´ ì„ íƒ'}\n            </button>\n          </div>\n          <div className=\"marker-status-options\">\n            {markerStatusOptions.map(option => (\n              <button\n                key={option.value}\n                onClick={() => toggleMarkerStatus(option.value)}\n                className={`marker-status-option ${selectedMarkerStatus.includes(option.value) ? 'active' : ''}`}\n                data-status={option.value}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n          \n\n\n          {/* ì„ íƒëœ ë§›ì§‘ ì •ë³´ */}\n          {selectedRestaurant && (\n            <div className=\"selected-restaurant-info\">\n              <h4>ğŸ“‹ ì„ íƒëœ ë§›ì§‘</h4>\n              <div className=\"restaurant-card\">\n                <h5>{selectedRestaurant.name}</h5>\n                <p className=\"restaurant-category\">{selectedRestaurant.category}</p>\n                <div className=\"restaurant-rating\">\n                  <span className=\"stars\">\n                    {renderStars(selectedRestaurant.rating)}\n                  </span>\n                  <span className=\"rating-text\">{selectedRestaurant.rating}</span>\n                </div>\n                <p className=\"restaurant-description\">{selectedRestaurant.description}</p>\n                <div className=\"restaurant-details\">\n                  <p>ğŸ“ {selectedRestaurant.address}</p>\n                  <p>ğŸ’° {selectedRestaurant.price}</p>\n                  <p>ğŸ•’ {selectedRestaurant.businessHours}</p>\n                  <p>ğŸ“ {selectedRestaurant.phone}</p>\n                  <p>ğŸš— {selectedRestaurant.parking}</p>\n                </div>\n                <div className=\"restaurant-actions\">\n                  <button \n                    className={`favorite-btn ${isInFavorites(selectedRestaurant.id) ? 'favorited' : ''}`}\n                    onClick={() => {\n                      if (isInFavorites(selectedRestaurant.id)) {\n                        removeFromFavorites(selectedRestaurant.id);\n                        alert('ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘‹');\n                      } else {\n                        addToFavorites(selectedRestaurant);\n                        alert('ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');\n                      }\n                    }}\n                  >\n                    {isInFavorites(selectedRestaurant.id) ? 'â¤ï¸ ì°œë¨' : 'ğŸ¤ ì°œí•˜ê¸°'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* ì˜¤ë¥¸ìª½ ì§€ë„ */}\n        <div className=\"map-section\">\n          <div id=\"map\" style={{ width: '100%', height: '100%' }}></div>\n          \n          {/* ì§€ë„ ìœ„ ìœ„ì¹˜ ë²„íŠ¼ ì˜¤ë²„ë ˆì´ */}\n          <div className=\"map-location-overlay\">\n            <button \n              className={`location-btn ${isLoadingLocation ? 'loading' : ''}`}\n              onClick={getUserLocation}\n              disabled={isLoadingLocation}\n            >\n              {isLoadingLocation ? 'ğŸ“ ìœ„ì¹˜ í™•ì¸ ì¤‘...' : 'ğŸ“ ë‚´ ìœ„ì¹˜ë¡œ ì´ë™'}\n            </button>\n          </div>\n          \n          {/* ë¯¸ë‹ˆ íŒì—… */}\n          {miniPopup && (\n            <div \n              className=\"mini-popup\"\n              style={{\n                left: `${popupPosition.x}px`,\n                top: `${popupPosition.y}px`\n              }}\n              onMouseDown={handleMouseDown}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseUp}\n            >\n              <div className=\"mini-popup-header\">\n                <h4>{miniPopup.name}</h4>\n                <button \n                  className=\"close-popup-btn\"\n                  onClick={() => setMiniPopup(null)}\n                >\n                  âœ•\n                </button>\n              </div>\n              \n              <div className=\"mini-popup-content\">\n                <div className=\"mini-popup-rating\">\n                  <div className=\"stars\">\n                    {renderStars(miniPopup.rating)}\n                  </div>\n                  <span className=\"rating-text\">{miniPopup.rating}</span>\n                </div>\n                \n                <div className=\"mini-popup-info\">\n                  <p className=\"category\">ğŸ½ï¸ {miniPopup.category}</p>\n                  <p className={`business-status ${isCurrentlyOpen(miniPopup.businessHours) ? 'open' : 'closed'}`}>\n                    {isCurrentlyOpen(miniPopup.businessHours) ? 'ğŸŸ¢ ì˜ì—… ì¤‘' : 'ğŸ”´ ì˜ì—… ì¢…ë£Œ'}\n                  </p>\n                </div>\n                \n                <div className=\"mini-popup-actions\">\n                  <button \n                    className={`favorite-btn ${isInFavorites(miniPopup.id) ? 'favorited' : ''}`}\n                    onClick={() => {\n                      if (isInFavorites(miniPopup.id)) {\n                        removeFromFavorites(miniPopup.id);\n                        alert('ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘‹');\n                      } else {\n                        addToFavorites(miniPopup);\n                        alert('ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');\n                      }\n                      setMiniPopup(null);\n                    }}\n                  >\n                    {isInFavorites(miniPopup.id) ? 'â¤ï¸ ì°œë¨' : 'ğŸ¤ ì°œí•˜ê¸°'}\n                  </button>\n                  <button \n                    className=\"detail-btn\"\n                    onClick={() => {\n                      setDetailModal(miniPopup);\n                      setMiniPopup(null);\n                    }}\n                  >\n                    ğŸ“‹ ìƒì„¸ë³´ê¸°\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* ìƒì„¸ì •ë³´ ëª¨ë‹¬ */}\n      {detailModal && (\n        <RestaurantDetailModal\n          restaurant={detailModal}\n          onClose={() => setDetailModal(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default KakaoMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}