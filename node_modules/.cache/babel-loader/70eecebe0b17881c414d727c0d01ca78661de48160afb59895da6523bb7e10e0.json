{"ast":null,"code":"var _jsxFileName = \"/Users/ingtto/Documents/GitHub/ingchelin/src/pages/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useFavorites } from '../context/FavoriteContext';\nimport { useVisit } from '../context/VisitContext';\nimport { useSearchParams } from 'react-router-dom';\nimport RestaurantDetailModal from '../components/RestaurantDetailModal';\nimport { coordinateService } from '../services/coordinateService';\nimport './Map.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction KakaoMap() {\n  _s();\n  const [restaurants, setRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const {\n    addToFavorites,\n    removeFromFavorites,\n    isInFavorites\n  } = useFavorites();\n  const {\n    getRestaurantVisitStatus,\n    setRestaurantVisitStatus\n  } = useVisit();\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbyRestaurants, setNearbyRestaurants] = useState([]);\n  const [userMarker, setUserMarker] = useState(null);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\n  const [searchParams] = useSearchParams();\n  const [mapInstance, setMapInstance] = useState(null);\n\n  // 새로운 상태들\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategories, setSelectedCategories] = useState(['한식', '중식', '일식', '양식', '분식', '태국', '술', '카페', '디저트']);\n  const [filteredRestaurants, setFilteredRestaurants] = useState([]);\n\n  // 마커 상태 추가\n  const [markers, setMarkers] = useState([]);\n  const [labels, setLabels] = useState([]);\n\n  // 마커 상태 필터 추가\n  const [selectedMarkerStatus, setSelectedMarkerStatus] = useState(['favorited', 'liked', 'disliked', 'not-visited']);\n\n  // 미니 팝업 상태 추가\n  const [miniPopup, setMiniPopup] = useState(null);\n  const [popupPosition, setPopupPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // 상세정보 모달 상태 추가\n  const [detailModal, setDetailModal] = useState(null);\n  const [isUpdatingCoordinates, setIsUpdatingCoordinates] = useState(false);\n\n  // 좌표 업데이트 함수\n  const handleUpdateCoordinates = async () => {\n    if (window.confirm('모든 식당의 주소를 좌표로 변환하시겠습니까? 이 작업은 시간이 걸릴 수 있습니다.')) {\n      setIsUpdatingCoordinates(true);\n      try {\n        const result = await coordinateService.updateAllCoordinates();\n        alert(result);\n        // 페이지 새로고침으로 업데이트된 데이터 반영\n        window.location.reload();\n      } catch (error) {\n        alert('좌표 업데이트에 실패했습니다: ' + error.message);\n      } finally {\n        setIsUpdatingCoordinates(false);\n      }\n    }\n  };\n\n  // 드래그 이벤트 핸들러\n  const handleMouseDown = e => {\n    setIsDragging(true);\n    setDragOffset({\n      x: e.clientX - popupPosition.x,\n      y: e.clientY - popupPosition.y\n    });\n  };\n  const handleMouseMove = e => {\n    if (isDragging) {\n      setPopupPosition({\n        x: e.clientX - dragOffset.x,\n        y: e.clientY - dragOffset.y\n      });\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // 카테고리 옵션\n  const categories = ['한식', '중식', '일식', '양식', '분식', '태국', '술', '카페', '디저트'];\n\n  // 마커 상태 옵션\n  const markerStatusOptions = [{\n    value: 'favorited',\n    label: '찜한 맛집',\n    color: '#FF3B30',\n    icon: '❤️'\n  }, {\n    value: 'liked',\n    label: '방문한 곳 (좋았던 곳)',\n    color: '#007AFF',\n    icon: '👍'\n  }, {\n    value: 'disliked',\n    label: '방문한 곳 (별로인 곳)',\n    color: '#8E8E93',\n    icon: '👎'\n  }, {\n    value: 'not-visited',\n    label: '안 가본 곳',\n    color: '#FF6B6B',\n    icon: '❓'\n  }];\n\n  // 실제 데이터베이스에서 레스토랑 데이터 가져오기\n  const fetchRestaurants = async () => {\n    try {\n      const response = await fetch('http://localhost:8082/api/restaurants');\n      if (response.ok) {\n        const data = await response.json();\n        // 데이터베이스 데이터를 지도 형식에 맞게 변환\n        const formattedData = data.map(restaurant => ({\n          id: restaurant.id,\n          name: restaurant.name,\n          category: restaurant.cuisine,\n          rating: restaurant.rating || 4.0,\n          address: restaurant.address,\n          description: restaurant.description || `${restaurant.cuisine} 전문점입니다.`,\n          price: restaurant.price || \"1만원~3만원\",\n          position: {\n            lat: restaurant.latitude || 37.5665,\n            lng: restaurant.longitude || 126.9780\n          },\n          hours: restaurant.businessHours || \"11:00 - 22:00\",\n          phone: restaurant.phone || \"02-0000-0000\",\n          parking: restaurant.parking || \"주차 가능\"\n        }));\n        setRestaurants(formattedData);\n        setFilteredRestaurants(formattedData);\n      } else {\n        console.error('레스토랑 데이터를 가져오는데 실패했습니다. 기본 데이터를 사용합니다.');\n        // 실패 시 기본 샘플 데이터 사용\n        const defaultData = [{\n          id: 1,\n          name: \"맛있는 한식집\",\n          category: \"한식\",\n          rating: 4.5,\n          address: \"서울시 강남구 테헤란로 123\",\n          description: \"전통 한식 전문점입니다.\",\n          price: \"1만원~3만원\",\n          position: {\n            lat: 37.5665,\n            lng: 126.9780\n          },\n          hours: \"11:00 - 22:00\",\n          phone: \"02-1234-5678\",\n          parking: \"주차 가능\"\n        }, {\n          id: 2,\n          name: \"신선한 일식집\",\n          category: \"일식\",\n          rating: 4.3,\n          address: \"서울시 강남구 역삼동 456\",\n          description: \"신선한 회와 초밥 전문점입니다.\",\n          price: \"2만원~5만원\",\n          position: {\n            lat: 37.5668,\n            lng: 126.9785\n          },\n          hours: \"11:30 - 22:30\",\n          phone: \"02-2345-6789\",\n          parking: \"주차 불가\"\n        }];\n        setRestaurants(defaultData);\n        setFilteredRestaurants(defaultData);\n      }\n    } catch (error) {\n      console.error('레스토랑 데이터를 가져오는 중 오류 발생:', error);\n      // 에러 시에도 기본 데이터 사용\n      const defaultData = [{\n        id: 1,\n        name: \"맛있는 한식집\",\n        category: \"한식\",\n        rating: 4.5,\n        address: \"서울시 강남구 테헤란로 123\",\n        description: \"전통 한식 전문점입니다.\",\n        price: \"1만원~3만원\",\n        position: {\n          lat: 37.5665,\n          lng: 126.9780\n        },\n        hours: \"11:00 - 22:00\",\n        phone: \"02-1234-5678\",\n        parking: \"주차 가능\"\n      }, {\n        id: 2,\n        name: \"신선한 일식집\",\n        category: \"일식\",\n        rating: 4.3,\n        address: \"서울시 강남구 역삼동 456\",\n        description: \"신선한 회와 초밥 전문점입니다.\",\n        price: \"2만원~5만원\",\n        position: {\n          lat: 37.5668,\n          lng: 126.9785\n        },\n        hours: \"11:30 - 22:30\",\n        phone: \"02-2345-6789\",\n        parking: \"주차 불가\"\n      }];\n      setRestaurants(defaultData);\n      setFilteredRestaurants(defaultData);\n    }\n  };\n\n  // 컴포넌트 마운트 시 데이터 가져오기\n  useEffect(() => {\n    fetchRestaurants();\n  }, []);\n\n  // 검색 및 필터링 함수\n  useEffect(() => {\n    let filtered = restaurants;\n\n    // 검색어 필터링\n    if (searchQuery.trim()) {\n      filtered = filtered.filter(restaurant => restaurant.name.toLowerCase().includes(searchQuery.toLowerCase()) || restaurant.address.toLowerCase().includes(searchQuery.toLowerCase()) || restaurant.category.toLowerCase().includes(searchQuery.toLowerCase()));\n    }\n\n    // 카테고리 필터링\n    filtered = filtered.filter(restaurant => selectedCategories.includes(restaurant.category));\n\n    // 마커 상태 필터링\n    filtered = filtered.filter(restaurant => {\n      if (isInFavorites(restaurant.id)) {\n        return selectedMarkerStatus.includes('favorited');\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          return selectedMarkerStatus.includes('liked');\n        } else if (visitStatus === 'disliked') {\n          return selectedMarkerStatus.includes('disliked');\n        } else {\n          return selectedMarkerStatus.includes('not-visited');\n        }\n      }\n    });\n    setFilteredRestaurants(filtered);\n  }, [restaurants, searchQuery, selectedCategories, selectedMarkerStatus]);\n\n  // 마커 업데이트 함수\n  const updateMapMarkers = restaurantsToShow => {\n    if (!mapInstance) return;\n\n    // 기존 마커와 라벨 제거\n    markers.forEach(marker => marker.setMap(null));\n    labels.forEach(label => label.setMap(null));\n    const newMarkers = [];\n    const newLabels = [];\n\n    // 새로운 마커와 라벨 추가\n    restaurantsToShow.forEach(restaurant => {\n      // 마커 색상 결정\n      let markerColor = '#FF6B6B'; // 기본 색상\n      let markerIcon = getCategoryIcon(restaurant.category);\n\n      // 상태별 색상 적용\n      if (isInFavorites(restaurant.id)) {\n        markerColor = '#FF3B30'; // 찜한 맛집 - 빨간색\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          markerColor = '#007AFF'; // 방문한 곳 (좋았던 곳) - 파란색\n        } else if (visitStatus === 'disliked') {\n          markerColor = '#8E8E93'; // 방문한 곳 (별로인 곳) - 회색\n        }\n      }\n\n      // 카테고리별 아이콘과 색상으로 마커 생성\n      const marker = new window.kakao.maps.Marker({\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        image: new window.kakao.maps.MarkerImage(createMarkerImage(markerColor, markerIcon), new window.kakao.maps.Size(40, 40))\n      });\n      marker.setMap(mapInstance);\n      newMarkers.push(marker);\n\n      // 마커 위에 식당 이름만 표시하는 커스텀 오버레이\n      const content = `\n        <div class=\"marker-label\">\n          <div class=\"marker-label-content\">\n            ${restaurant.name}\n          </div>\n        </div>\n      `;\n      const label = new window.kakao.maps.CustomOverlay({\n        content: content,\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        xAnchor: 0.5,\n        yAnchor: 1.5\n      });\n      label.setMap(mapInstance);\n      newLabels.push(label);\n\n      // 마커 클릭 이벤트\n      window.kakao.maps.event.addListener(marker, 'click', () => {\n        setSelectedRestaurant(restaurant);\n\n        // 미니 팝업 표시 - 지도 컨테이너 내 상대적 위치로 계산\n        const position = new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng);\n        const projection = mapInstance.getProjection();\n        const point = projection.pointFromCoords(position);\n        setMiniPopup(restaurant);\n        setPopupPosition({\n          x: point.x,\n          y: point.y - 80 // 마커 위에 표시\n        });\n      });\n    });\n    setMarkers(newMarkers);\n    setLabels(newLabels);\n  };\n\n  // 마커 이미지 생성 함수\n  const createMarkerImage = (color, icon) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 40;\n    canvas.height = 40;\n    const ctx = canvas.getContext('2d');\n\n    // 원형 배경 그리기\n    ctx.beginPath();\n    ctx.arc(20, 20, 18, 0, 2 * Math.PI);\n    ctx.fillStyle = color;\n    ctx.fill();\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 2;\n    ctx.stroke();\n\n    // 아이콘 텍스트 그리기\n    ctx.fillStyle = 'white';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(icon, 20, 20);\n    return canvas.toDataURL();\n  };\n\n  // 필터링된 레스토랑이 변경될 때 마커 업데이트\n  useEffect(() => {\n    if (mapLoaded && mapInstance) {\n      updateMapMarkers(filteredRestaurants);\n\n      // URL 파라미터로 특정 식당이 지정된 경우 해당 식당 정보 표시\n      const restaurantId = searchParams.get('restaurantId');\n      if (restaurantId) {\n        const selectedRestaurant = filteredRestaurants.find(restaurant => restaurant.id.toString() === restaurantId);\n        if (selectedRestaurant) {\n          setTimeout(() => {\n            setSelectedRestaurant(selectedRestaurant);\n          }, 1000);\n        }\n      }\n    }\n  }, [filteredRestaurants, mapLoaded, mapInstance, searchParams]);\n\n  // 카테고리 토글 함수\n  const toggleCategory = category => {\n    setSelectedCategories(prev => prev.includes(category) ? prev.filter(c => c !== category) : [...prev, category]);\n  };\n\n  // 모든 카테고리 토글 함수\n  const toggleAllCategories = () => {\n    setSelectedCategories(selectedCategories.length === categories.length ? [] : categories);\n  };\n\n  // 검색어 초기화 함수\n  const clearSearch = () => {\n    setSearchQuery('');\n  };\n\n  // 카테고리 아이콘 반환 함수\n  const getCategoryIcon = category => {\n    const icons = {\n      '한식': '🍚',\n      '양식': '🍝',\n      '일식': '🍣',\n      '중식': '🥢',\n      '카페': '☕',\n      '디저트': '🍰',\n      '분식': '🍡',\n      '술': '🍺',\n      '태국': '🍜'\n    };\n    return icons[category] || '🍽️';\n  };\n\n  // 마커 상태 토글 함수\n  const toggleMarkerStatus = status => {\n    setSelectedMarkerStatus(prev => prev.includes(status) ? prev.filter(s => s !== status) : [...prev, status]);\n  };\n\n  // 모든 마커 상태 토글 함수\n  const toggleAllMarkerStatus = () => {\n    setSelectedMarkerStatus(selectedMarkerStatus.length === markerStatusOptions.length ? [] : markerStatusOptions.map(option => option.value));\n  };\n  useEffect(() => {\n    // 실제 데이터베이스에서 레스토랑 데이터 가져오기\n    fetchRestaurants();\n\n    // URL 파라미터 확인\n    const restaurantId = searchParams.get('restaurantId');\n    const lat = searchParams.get('lat');\n    const lng = searchParams.get('lng');\n\n    // 사용자 위치 가져오기\n    const getUserLocationForMap = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(position => {\n          const {\n            latitude,\n            longitude\n          } = position.coords;\n          const newUserLocation = {\n            lat: latitude,\n            lng: longitude\n          };\n          setUserLocation(newUserLocation);\n\n          // 사용자 위치로 지도 초기화\n          initKakaoMapWithLocation(latitude, longitude);\n        }, error => {\n          console.log('위치 정보를 가져올 수 없습니다:', error);\n          // 위치 정보를 가져올 수 없으면 기본 위치로 초기화\n          initKakaoMapWithLocation();\n        });\n      } else {\n        // 위치 정보를 지원하지 않으면 기본 위치로 초기화\n        initKakaoMapWithLocation();\n      }\n    };\n\n    // 카카오맵 초기화 (위치 정보 포함)\n    const initKakaoMapWithLocation = (userLat = null, userLng = null) => {\n      if (window.kakao && window.kakao.maps) {\n        const container = document.getElementById('map');\n\n        // 우선순위: URL 파라미터 > 사용자 위치 > 기본 위치\n        let centerLat, centerLng;\n        if (lat && lng) {\n          centerLat = parseFloat(lat);\n          centerLng = parseFloat(lng);\n        } else if (userLat && userLng) {\n          centerLat = userLat;\n          centerLng = userLng;\n        } else {\n          centerLat = 37.3520; // 정자동 중심\n          centerLng = 127.1087;\n        }\n        const options = {\n          center: new window.kakao.maps.LatLng(centerLat, centerLng),\n          level: restaurantId ? 3 : 6\n        };\n        const map = new window.kakao.maps.Map(container, options);\n        setMapInstance(map);\n        setMapLoaded(true);\n\n        // 초기 마커 설정 (전체 레스토랑)\n        updateMapMarkers(restaurants);\n\n        // 사용자 위치 마커 추가\n        if (userLat && userLng) {\n          const userMarker = new window.kakao.maps.Marker({\n            position: new window.kakao.maps.LatLng(userLat, userLng),\n            image: new window.kakao.maps.MarkerImage('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K', new window.kakao.maps.Size(30, 30))\n          });\n          userMarker.setMap(map);\n          setUserMarker(userMarker);\n        }\n      } else {\n        // 카카오맵 API가 로드되지 않았으면 1초 후 다시 시도\n        setTimeout(() => initKakaoMapWithLocation(userLat, userLng), 1000);\n      }\n    };\n\n    // 페이지 로드 후 사용자 위치 가져오기 및 지도 초기화\n    const timer = setTimeout(getUserLocationForMap, 1000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // 두 지점 간의 거리 계산 (하버사인 공식)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // 지구의 반지름 (km)\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // km\n    return distance;\n  };\n\n  // 사용자 위치 가져오기\n  const getUserLocation = () => {\n    if (!navigator.geolocation) {\n      alert('이 브라우저에서는 위치 정보를 지원하지 않습니다.');\n      return;\n    }\n    setIsLoadingLocation(true);\n    navigator.geolocation.getCurrentPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      const newUserLocation = {\n        lat: latitude,\n        lng: longitude\n      };\n      setUserLocation(newUserLocation);\n\n      // 지도가 로드된 후에만 중심 이동\n      if (mapInstance) {\n        // 기존 사용자 마커 제거\n        if (userMarker) {\n          userMarker.setMap(null);\n        }\n\n        // 사용자 위치로 지도 중심 이동\n        mapInstance.setCenter(new window.kakao.maps.LatLng(latitude, longitude));\n        mapInstance.setLevel(5);\n\n        // 새로운 사용자 위치 마커 추가\n        const newUserMarker = new window.kakao.maps.Marker({\n          position: new window.kakao.maps.LatLng(latitude, longitude),\n          image: new window.kakao.maps.MarkerImage('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K', new window.kakao.maps.Size(30, 30))\n        });\n        newUserMarker.setMap(mapInstance);\n        setUserMarker(newUserMarker);\n      }\n\n      // 가까운 식당 찾기 (3km 이내)\n      const restaurantsWithDistance = restaurants.map(restaurant => {\n        const distance = calculateDistance(latitude, longitude, restaurant.position.lat, restaurant.position.lng);\n        return {\n          ...restaurant,\n          distance: distance\n        };\n      });\n      const nearby = restaurantsWithDistance.filter(restaurant => restaurant.distance <= 3).sort((a, b) => a.distance - b.distance);\n      setNearbyRestaurants(nearby);\n      setIsLoadingLocation(false);\n    }, error => {\n      let errorMessage = '위치 정보를 가져올 수 없습니다.';\n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          errorMessage = '위치 정보 접근이 거부되었습니다. 브라우저 설정에서 위치 정보 접근을 허용해주세요.';\n          break;\n        case error.POSITION_UNAVAILABLE:\n          errorMessage = '위치 정보를 사용할 수 없습니다.';\n          break;\n        case error.TIMEOUT:\n          errorMessage = '위치 정보 요청 시간이 초과되었습니다.';\n          break;\n      }\n      alert(errorMessage);\n      setIsLoadingLocation(false);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 300000 // 5분\n    });\n  };\n  const getCategoryColor = category => {\n    const colors = {\n      '한식': '#ff6b6b',\n      '양식': '#4ecdc4',\n      '일식': '#45b7d1',\n      '중식': '#96ceb4',\n      '동남아식': '#feca57',\n      '카페': '#ff9ff3'\n    };\n    return colors[category] || '#95a5a6';\n  };\n\n  // 현재 시간이 영업시간인지 확인하는 함수\n  const isCurrentlyOpen = businessHours => {\n    if (!businessHours) return false;\n    const now = new Date();\n    const currentTime = now.getHours() * 100 + now.getMinutes();\n\n    // 간단한 시간 파싱 (예: \"11:00 - 22:00\")\n    const timeMatch = businessHours.match(/(\\d{1,2}):(\\d{2})\\s*-\\s*(\\d{1,2}):(\\d{2})/);\n    if (!timeMatch) return true; // 파싱할 수 없으면 영업 중으로 간주\n\n    const openHour = parseInt(timeMatch[1]);\n    const openMinute = parseInt(timeMatch[2]);\n    const closeHour = parseInt(timeMatch[3]);\n    const closeMinute = parseInt(timeMatch[4]);\n    const openTime = openHour * 100 + openMinute;\n    const closeTime = closeHour * 100 + closeMinute;\n    return currentTime >= openTime && currentTime <= closeTime;\n  };\n\n  // 평점을 별로 표시하는 함수\n  const renderStars = rating => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `star ${i <= rating ? 'filled' : ''}`,\n        children: \"\\u2605\"\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 9\n      }, this));\n    }\n    return stars;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDDFA\\uFE0F \\uC778\\uC290\\uB7AD \\uB9DB\\uC9D1 \\uC9C0\\uB3C4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\uC9C0\\uC5ED\\uBA85, \\uB9DB\\uC9D1 \\uC774\\uB984\\uC73C\\uB85C \\uAC80\\uC0C9...\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            className: \"search-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 13\n          }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearSearch,\n            className: \"clear-search-btn\",\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-results\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"results-count\",\n            children: [filteredRestaurants.length, \"\\uAC1C\\uC758 \\uB9DB\\uC9D1\\uC774 \\uAC80\\uC0C9\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uD83C\\uDF7D\\uFE0F \\uC74C\\uC2DD \\uC885\\uB958 \\uD544\\uD130\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleAllCategories,\n            className: \"toggle-all-btn\",\n            children: selectedCategories.length === categories.length ? '전체 해제' : '전체 선택'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-filters\",\n          children: categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleCategory(category),\n            className: `category-filter-btn ${selectedCategories.includes(category) ? 'active' : ''}`,\n            children: [getCategoryIcon(category), \" \", category]\n          }, category, true, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"marker-status-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uD83C\\uDF1F \\uB9DB\\uC9D1 \\uC0C1\\uD0DC \\uD544\\uD130\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleAllMarkerStatus,\n            className: \"toggle-all-btn\",\n            children: selectedMarkerStatus.length === markerStatusOptions.length ? '전체 해제' : '전체 선택'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"marker-status-options\",\n          children: markerStatusOptions.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleMarkerStatus(option.value),\n            className: `marker-status-option ${selectedMarkerStatus.includes(option.value) ? 'active' : ''}`,\n            \"data-status\": option.value,\n            children: option.label\n          }, option.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coordinate-update-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uD83D\\uDDFA\\uFE0F \\uC88C\\uD45C \\uC5C5\\uB370\\uC774\\uD2B8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `coordinate-update-btn ${isUpdatingCoordinates ? 'loading' : ''}`,\n            onClick: handleUpdateCoordinates,\n            disabled: isUpdatingCoordinates,\n            children: isUpdatingCoordinates ? '🔄 좌표 변환 중...' : '📍 주소를 좌표로 변환'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"coordinate-update-info\",\n            children: \"\\uC8FC\\uC18C \\uC815\\uBCF4\\uB97C \\uC774\\uC6A9\\uD574 \\uC9C0\\uB3C4\\uC5D0 \\uD45C\\uC2DC\\uD560 \\uC88C\\uD45C\\uB97C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this), selectedRestaurant && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selected-restaurant-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uD83D\\uDCCB \\uC120\\uD0DD\\uB41C \\uB9DB\\uC9D1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"restaurant-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: selectedRestaurant.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"restaurant-category\",\n              children: selectedRestaurant.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"restaurant-rating\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stars\",\n                children: renderStars(selectedRestaurant.rating)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rating-text\",\n                children: selectedRestaurant.rating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"restaurant-description\",\n              children: selectedRestaurant.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 745,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"restaurant-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDCCD \", selectedRestaurant.address]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDCB0 \", selectedRestaurant.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDD52 \", selectedRestaurant.businessHours]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDCDE \", selectedRestaurant.phone]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\uD83D\\uDE97 \", selectedRestaurant.parking]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"restaurant-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `favorite-btn ${isInFavorites(selectedRestaurant.id) ? 'favorited' : ''}`,\n                onClick: () => {\n                  if (isInFavorites(selectedRestaurant.id)) {\n                    removeFromFavorites(selectedRestaurant.id);\n                    alert('찜 목록에서 제거되었습니다! 👋');\n                  } else {\n                    addToFavorites(selectedRestaurant);\n                    alert('찜 목록에 추가되었습니다! 🎉');\n                  }\n                },\n                children: isInFavorites(selectedRestaurant.id) ? '❤️ 찜됨' : '🤍 찜하기'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 736,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"map\",\n          style: {\n            width: '100%',\n            height: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map-location-overlay\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `location-btn ${isLoadingLocation ? 'loading' : ''}`,\n            onClick: getUserLocation,\n            disabled: isLoadingLocation,\n            children: isLoadingLocation ? '📍 위치 확인 중...' : '📍 내 위치로 이동'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 780,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 11\n        }, this), miniPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mini-popup\",\n          style: {\n            left: `${popupPosition.x}px`,\n            top: `${popupPosition.y}px`\n          },\n          onMouseDown: handleMouseDown,\n          onMouseMove: handleMouseMove,\n          onMouseUp: handleMouseUp,\n          onMouseLeave: handleMouseUp,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-popup-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: miniPopup.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 803,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"close-popup-btn\",\n              onClick: () => setMiniPopup(null),\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 804,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-popup-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mini-popup-rating\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"stars\",\n                children: renderStars(miniPopup.rating)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rating-text\",\n                children: miniPopup.rating\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 813,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mini-popup-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"category\",\n                children: [\"\\uD83C\\uDF7D\\uFE0F \", miniPopup.category]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 821,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `business-status ${isCurrentlyOpen(miniPopup.businessHours) ? 'open' : 'closed'}`,\n                children: isCurrentlyOpen(miniPopup.businessHours) ? '🟢 영업 중' : '🔴 영업 종료'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 820,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mini-popup-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `favorite-btn ${isInFavorites(miniPopup.id) ? 'favorited' : ''}`,\n                onClick: () => {\n                  if (isInFavorites(miniPopup.id)) {\n                    removeFromFavorites(miniPopup.id);\n                    alert('찜 목록에서 제거되었습니다! 👋');\n                  } else {\n                    addToFavorites(miniPopup);\n                    alert('찜 목록에 추가되었습니다! 🎉');\n                  }\n                  setMiniPopup(null);\n                },\n                children: isInFavorites(miniPopup.id) ? '❤️ 찜됨' : '🤍 찜하기'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"detail-btn\",\n                onClick: () => {\n                  setDetailModal(miniPopup);\n                  setMiniPopup(null);\n                },\n                children: \"\\uD83D\\uDCCB \\uC0C1\\uC138\\uBCF4\\uAE30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 843,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 7\n    }, this), detailModal && /*#__PURE__*/_jsxDEV(RestaurantDetailModal, {\n      restaurant: detailModal,\n      onClose: () => setDetailModal(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 641,\n    columnNumber: 5\n  }, this);\n}\n_s(KakaoMap, \"82Fsu7U0m48Ys6BKsavSCfjtJbo=\", false, function () {\n  return [useFavorites, useVisit, useSearchParams];\n});\n_c = KakaoMap;\nexport default KakaoMap;\nvar _c;\n$RefreshReg$(_c, \"KakaoMap\");","map":{"version":3,"names":["React","useState","useEffect","useFavorites","useVisit","useSearchParams","RestaurantDetailModal","coordinateService","jsxDEV","_jsxDEV","KakaoMap","_s","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","addToFavorites","removeFromFavorites","isInFavorites","getRestaurantVisitStatus","setRestaurantVisitStatus","mapLoaded","setMapLoaded","userLocation","setUserLocation","nearbyRestaurants","setNearbyRestaurants","userMarker","setUserMarker","isLoadingLocation","setIsLoadingLocation","searchParams","mapInstance","setMapInstance","searchQuery","setSearchQuery","selectedCategories","setSelectedCategories","filteredRestaurants","setFilteredRestaurants","markers","setMarkers","labels","setLabels","selectedMarkerStatus","setSelectedMarkerStatus","miniPopup","setMiniPopup","popupPosition","setPopupPosition","x","y","isDragging","setIsDragging","dragOffset","setDragOffset","detailModal","setDetailModal","isUpdatingCoordinates","setIsUpdatingCoordinates","handleUpdateCoordinates","window","confirm","result","updateAllCoordinates","alert","location","reload","error","message","handleMouseDown","e","clientX","clientY","handleMouseMove","handleMouseUp","categories","markerStatusOptions","value","label","color","icon","fetchRestaurants","response","fetch","ok","data","json","formattedData","map","restaurant","id","name","category","cuisine","rating","address","description","price","position","lat","latitude","lng","longitude","hours","businessHours","phone","parking","console","defaultData","filtered","trim","filter","toLowerCase","includes","visitStatus","updateMapMarkers","restaurantsToShow","forEach","marker","setMap","newMarkers","newLabels","markerColor","markerIcon","getCategoryIcon","kakao","maps","Marker","LatLng","image","MarkerImage","createMarkerImage","Size","push","content","CustomOverlay","xAnchor","yAnchor","event","addListener","projection","getProjection","point","pointFromCoords","canvas","document","createElement","width","height","ctx","getContext","beginPath","arc","Math","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","font","textAlign","textBaseline","fillText","toDataURL","restaurantId","get","find","toString","setTimeout","toggleCategory","prev","c","toggleAllCategories","length","clearSearch","icons","toggleMarkerStatus","status","s","toggleAllMarkerStatus","option","getUserLocationForMap","navigator","geolocation","getCurrentPosition","coords","newUserLocation","initKakaoMapWithLocation","log","userLat","userLng","container","getElementById","centerLat","centerLng","parseFloat","options","center","level","Map","timer","clearTimeout","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","dLon","a","sin","cos","atan2","sqrt","distance","getUserLocation","setCenter","setLevel","newUserMarker","restaurantsWithDistance","nearby","sort","b","errorMessage","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","enableHighAccuracy","timeout","maximumAge","getCategoryColor","colors","isCurrentlyOpen","now","Date","currentTime","getHours","getMinutes","timeMatch","match","openHour","parseInt","openMinute","closeHour","closeMinute","openTime","closeTime","renderStars","stars","i","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","target","onClick","disabled","style","left","top","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onClose","_c","$RefreshReg$"],"sources":["/Users/ingtto/Documents/GitHub/ingchelin/src/pages/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useFavorites } from '../context/FavoriteContext';\nimport { useVisit } from '../context/VisitContext';\nimport { useSearchParams } from 'react-router-dom';\nimport RestaurantDetailModal from '../components/RestaurantDetailModal';\nimport { coordinateService } from '../services/coordinateService';\nimport './Map.css';\n\nfunction KakaoMap() {\n  const [restaurants, setRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const { addToFavorites, removeFromFavorites, isInFavorites } = useFavorites();\n  const { getRestaurantVisitStatus, setRestaurantVisitStatus } = useVisit();\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbyRestaurants, setNearbyRestaurants] = useState([]);\n  const [userMarker, setUserMarker] = useState(null);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\n  const [searchParams] = useSearchParams();\n  const [mapInstance, setMapInstance] = useState(null);\n  \n  // 새로운 상태들\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategories, setSelectedCategories] = useState(['한식', '중식', '일식', '양식', '분식', '태국', '술', '카페', '디저트']);\n  const [filteredRestaurants, setFilteredRestaurants] = useState([]);\n  \n  // 마커 상태 추가\n  const [markers, setMarkers] = useState([]);\n  const [labels, setLabels] = useState([]);\n  \n  // 마커 상태 필터 추가\n  const [selectedMarkerStatus, setSelectedMarkerStatus] = useState(['favorited', 'liked', 'disliked', 'not-visited']);\n  \n  // 미니 팝업 상태 추가\n  const [miniPopup, setMiniPopup] = useState(null);\n  const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  \n  // 상세정보 모달 상태 추가\n  const [detailModal, setDetailModal] = useState(null);\n  const [isUpdatingCoordinates, setIsUpdatingCoordinates] = useState(false);\n\n  // 좌표 업데이트 함수\n  const handleUpdateCoordinates = async () => {\n    if (window.confirm('모든 식당의 주소를 좌표로 변환하시겠습니까? 이 작업은 시간이 걸릴 수 있습니다.')) {\n      setIsUpdatingCoordinates(true);\n      try {\n        const result = await coordinateService.updateAllCoordinates();\n        alert(result);\n        // 페이지 새로고침으로 업데이트된 데이터 반영\n        window.location.reload();\n      } catch (error) {\n        alert('좌표 업데이트에 실패했습니다: ' + error.message);\n      } finally {\n        setIsUpdatingCoordinates(false);\n      }\n    }\n  };\n\n  // 드래그 이벤트 핸들러\n  const handleMouseDown = (e) => {\n    setIsDragging(true);\n    setDragOffset({\n      x: e.clientX - popupPosition.x,\n      y: e.clientY - popupPosition.y\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (isDragging) {\n      setPopupPosition({\n        x: e.clientX - dragOffset.x,\n        y: e.clientY - dragOffset.y\n      });\n    }\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // 카테고리 옵션\n  const categories = ['한식', '중식', '일식', '양식', '분식', '태국', '술', '카페', '디저트'];\n  \n  // 마커 상태 옵션\n  const markerStatusOptions = [\n    { value: 'favorited', label: '찜한 맛집', color: '#FF3B30', icon: '❤️' },\n    { value: 'liked', label: '방문한 곳 (좋았던 곳)', color: '#007AFF', icon: '👍' },\n    { value: 'disliked', label: '방문한 곳 (별로인 곳)', color: '#8E8E93', icon: '👎' },\n    { value: 'not-visited', label: '안 가본 곳', color: '#FF6B6B', icon: '❓' }\n  ];\n\n  // 실제 데이터베이스에서 레스토랑 데이터 가져오기\n  const fetchRestaurants = async () => {\n    try {\n      const response = await fetch('http://localhost:8082/api/restaurants');\n      if (response.ok) {\n        const data = await response.json();\n        // 데이터베이스 데이터를 지도 형식에 맞게 변환\n        const formattedData = data.map(restaurant => ({\n          id: restaurant.id,\n          name: restaurant.name,\n          category: restaurant.cuisine,\n          rating: restaurant.rating || 4.0,\n          address: restaurant.address,\n          description: restaurant.description || `${restaurant.cuisine} 전문점입니다.`,\n          price: restaurant.price || \"1만원~3만원\",\n          position: { \n            lat: restaurant.latitude || 37.5665, \n            lng: restaurant.longitude || 126.9780 \n          },\n          hours: restaurant.businessHours || \"11:00 - 22:00\",\n          phone: restaurant.phone || \"02-0000-0000\",\n          parking: restaurant.parking || \"주차 가능\"\n        }));\n        setRestaurants(formattedData);\n        setFilteredRestaurants(formattedData);\n      } else {\n        console.error('레스토랑 데이터를 가져오는데 실패했습니다. 기본 데이터를 사용합니다.');\n        // 실패 시 기본 샘플 데이터 사용\n        const defaultData = [\n          {\n            id: 1,\n            name: \"맛있는 한식집\",\n            category: \"한식\",\n            rating: 4.5,\n            address: \"서울시 강남구 테헤란로 123\",\n            description: \"전통 한식 전문점입니다.\",\n            price: \"1만원~3만원\",\n            position: { lat: 37.5665, lng: 126.9780 },\n            hours: \"11:00 - 22:00\",\n            phone: \"02-1234-5678\",\n            parking: \"주차 가능\"\n          },\n          {\n            id: 2,\n            name: \"신선한 일식집\",\n            category: \"일식\",\n            rating: 4.3,\n            address: \"서울시 강남구 역삼동 456\",\n            description: \"신선한 회와 초밥 전문점입니다.\",\n            price: \"2만원~5만원\",\n            position: { lat: 37.5668, lng: 126.9785 },\n            hours: \"11:30 - 22:30\",\n            phone: \"02-2345-6789\",\n            parking: \"주차 불가\"\n          }\n        ];\n        setRestaurants(defaultData);\n        setFilteredRestaurants(defaultData);\n      }\n    } catch (error) {\n      console.error('레스토랑 데이터를 가져오는 중 오류 발생:', error);\n      // 에러 시에도 기본 데이터 사용\n      const defaultData = [\n        {\n          id: 1,\n          name: \"맛있는 한식집\",\n          category: \"한식\",\n          rating: 4.5,\n          address: \"서울시 강남구 테헤란로 123\",\n          description: \"전통 한식 전문점입니다.\",\n          price: \"1만원~3만원\",\n          position: { lat: 37.5665, lng: 126.9780 },\n          hours: \"11:00 - 22:00\",\n          phone: \"02-1234-5678\",\n          parking: \"주차 가능\"\n        },\n        {\n          id: 2,\n          name: \"신선한 일식집\",\n          category: \"일식\",\n          rating: 4.3,\n          address: \"서울시 강남구 역삼동 456\",\n          description: \"신선한 회와 초밥 전문점입니다.\",\n          price: \"2만원~5만원\",\n          position: { lat: 37.5668, lng: 126.9785 },\n          hours: \"11:30 - 22:30\",\n          phone: \"02-2345-6789\",\n          parking: \"주차 불가\"\n        }\n      ];\n      setRestaurants(defaultData);\n      setFilteredRestaurants(defaultData);\n    }\n  };\n\n  // 컴포넌트 마운트 시 데이터 가져오기\n  useEffect(() => {\n    fetchRestaurants();\n  }, []);\n\n  // 검색 및 필터링 함수\n  useEffect(() => {\n    let filtered = restaurants;\n    \n    // 검색어 필터링\n    if (searchQuery.trim()) {\n      filtered = filtered.filter(restaurant => \n        restaurant.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        restaurant.address.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        restaurant.category.toLowerCase().includes(searchQuery.toLowerCase())\n      );\n    }\n    \n    // 카테고리 필터링\n    filtered = filtered.filter(restaurant => \n      selectedCategories.includes(restaurant.category)\n    );\n    \n    // 마커 상태 필터링\n    filtered = filtered.filter(restaurant => {\n      if (isInFavorites(restaurant.id)) {\n        return selectedMarkerStatus.includes('favorited');\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          return selectedMarkerStatus.includes('liked');\n        } else if (visitStatus === 'disliked') {\n          return selectedMarkerStatus.includes('disliked');\n        } else {\n          return selectedMarkerStatus.includes('not-visited');\n        }\n      }\n    });\n    \n    setFilteredRestaurants(filtered);\n  }, [restaurants, searchQuery, selectedCategories, selectedMarkerStatus]);\n\n  // 마커 업데이트 함수\n  const updateMapMarkers = (restaurantsToShow) => {\n    if (!mapInstance) return;\n\n    // 기존 마커와 라벨 제거\n    markers.forEach(marker => marker.setMap(null));\n    labels.forEach(label => label.setMap(null));\n\n    const newMarkers = [];\n    const newLabels = [];\n\n    // 새로운 마커와 라벨 추가\n    restaurantsToShow.forEach((restaurant) => {\n      // 마커 색상 결정\n      let markerColor = '#FF6B6B'; // 기본 색상\n      let markerIcon = getCategoryIcon(restaurant.category);\n      \n      // 상태별 색상 적용\n      if (isInFavorites(restaurant.id)) {\n        markerColor = '#FF3B30'; // 찜한 맛집 - 빨간색\n      } else {\n        const visitStatus = getRestaurantVisitStatus(restaurant.id);\n        if (visitStatus === 'liked') {\n          markerColor = '#007AFF'; // 방문한 곳 (좋았던 곳) - 파란색\n        } else if (visitStatus === 'disliked') {\n          markerColor = '#8E8E93'; // 방문한 곳 (별로인 곳) - 회색\n        }\n      }\n\n      // 카테고리별 아이콘과 색상으로 마커 생성\n      const marker = new window.kakao.maps.Marker({\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        image: new window.kakao.maps.MarkerImage(\n          createMarkerImage(markerColor, markerIcon),\n          new window.kakao.maps.Size(40, 40)\n        )\n      });\n      \n      marker.setMap(mapInstance);\n      newMarkers.push(marker);\n      \n      // 마커 위에 식당 이름만 표시하는 커스텀 오버레이\n      const content = `\n        <div class=\"marker-label\">\n          <div class=\"marker-label-content\">\n            ${restaurant.name}\n          </div>\n        </div>\n      `;\n      \n      const label = new window.kakao.maps.CustomOverlay({\n        content: content,\n        position: new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng),\n        xAnchor: 0.5,\n        yAnchor: 1.5\n      });\n      \n      label.setMap(mapInstance);\n      newLabels.push(label);\n      \n      // 마커 클릭 이벤트\n      window.kakao.maps.event.addListener(marker, 'click', () => {\n        setSelectedRestaurant(restaurant);\n        \n        // 미니 팝업 표시 - 지도 컨테이너 내 상대적 위치로 계산\n        const position = new window.kakao.maps.LatLng(restaurant.position.lat, restaurant.position.lng);\n        const projection = mapInstance.getProjection();\n        const point = projection.pointFromCoords(position);\n        \n        setMiniPopup(restaurant);\n        setPopupPosition({\n          x: point.x,\n          y: point.y - 80 // 마커 위에 표시\n        });\n      });\n    });\n\n    setMarkers(newMarkers);\n    setLabels(newLabels);\n  };\n\n  // 마커 이미지 생성 함수\n  const createMarkerImage = (color, icon) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 40;\n    canvas.height = 40;\n    const ctx = canvas.getContext('2d');\n    \n    // 원형 배경 그리기\n    ctx.beginPath();\n    ctx.arc(20, 20, 18, 0, 2 * Math.PI);\n    ctx.fillStyle = color;\n    ctx.fill();\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 2;\n    ctx.stroke();\n    \n    // 아이콘 텍스트 그리기\n    ctx.fillStyle = 'white';\n    ctx.font = '16px Arial';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(icon, 20, 20);\n    \n    return canvas.toDataURL();\n  };\n\n  // 필터링된 레스토랑이 변경될 때 마커 업데이트\n  useEffect(() => {\n    if (mapLoaded && mapInstance) {\n      updateMapMarkers(filteredRestaurants);\n      \n      // URL 파라미터로 특정 식당이 지정된 경우 해당 식당 정보 표시\n      const restaurantId = searchParams.get('restaurantId');\n      if (restaurantId) {\n        const selectedRestaurant = filteredRestaurants.find(\n          restaurant => restaurant.id.toString() === restaurantId\n        );\n        if (selectedRestaurant) {\n          setTimeout(() => {\n            setSelectedRestaurant(selectedRestaurant);\n          }, 1000);\n        }\n      }\n    }\n  }, [filteredRestaurants, mapLoaded, mapInstance, searchParams]);\n\n  // 카테고리 토글 함수\n  const toggleCategory = (category) => {\n    setSelectedCategories(prev => \n      prev.includes(category) \n        ? prev.filter(c => c !== category)\n        : [...prev, category]\n    );\n  };\n\n  // 모든 카테고리 토글 함수\n  const toggleAllCategories = () => {\n    setSelectedCategories(selectedCategories.length === categories.length ? [] : categories);\n  };\n\n  // 검색어 초기화 함수\n  const clearSearch = () => {\n    setSearchQuery('');\n  };\n\n  // 카테고리 아이콘 반환 함수\n  const getCategoryIcon = (category) => {\n    const icons = {\n      '한식': '🍚',\n      '양식': '🍝',\n      '일식': '🍣',\n      '중식': '🥢',\n      '카페': '☕',\n      '디저트': '🍰',\n      '분식': '🍡',\n      '술': '🍺',\n      '태국': '🍜'\n    };\n    return icons[category] || '🍽️';\n  };\n\n  // 마커 상태 토글 함수\n  const toggleMarkerStatus = (status) => {\n    setSelectedMarkerStatus(prev => \n      prev.includes(status) \n        ? prev.filter(s => s !== status)\n        : [...prev, status]\n    );\n  };\n\n  // 모든 마커 상태 토글 함수\n  const toggleAllMarkerStatus = () => {\n    setSelectedMarkerStatus(selectedMarkerStatus.length === markerStatusOptions.length ? [] : markerStatusOptions.map(option => option.value));\n  };\n\n  useEffect(() => {\n    // 실제 데이터베이스에서 레스토랑 데이터 가져오기\n    fetchRestaurants();\n\n    // URL 파라미터 확인\n    const restaurantId = searchParams.get('restaurantId');\n    const lat = searchParams.get('lat');\n    const lng = searchParams.get('lng');\n\n    // 사용자 위치 가져오기\n    const getUserLocationForMap = () => {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            const { latitude, longitude } = position.coords;\n            const newUserLocation = { lat: latitude, lng: longitude };\n            setUserLocation(newUserLocation);\n            \n            // 사용자 위치로 지도 초기화\n            initKakaoMapWithLocation(latitude, longitude);\n          },\n          (error) => {\n            console.log('위치 정보를 가져올 수 없습니다:', error);\n            // 위치 정보를 가져올 수 없으면 기본 위치로 초기화\n            initKakaoMapWithLocation();\n          }\n        );\n      } else {\n        // 위치 정보를 지원하지 않으면 기본 위치로 초기화\n        initKakaoMapWithLocation();\n      }\n    };\n\n    // 카카오맵 초기화 (위치 정보 포함)\n    const initKakaoMapWithLocation = (userLat = null, userLng = null) => {\n      if (window.kakao && window.kakao.maps) {\n        const container = document.getElementById('map');\n        \n        // 우선순위: URL 파라미터 > 사용자 위치 > 기본 위치\n        let centerLat, centerLng;\n        if (lat && lng) {\n          centerLat = parseFloat(lat);\n          centerLng = parseFloat(lng);\n        } else if (userLat && userLng) {\n          centerLat = userLat;\n          centerLng = userLng;\n        } else {\n          centerLat = 37.3520; // 정자동 중심\n          centerLng = 127.1087;\n        }\n        \n        const options = {\n          center: new window.kakao.maps.LatLng(centerLat, centerLng),\n          level: restaurantId ? 3 : 6\n        };\n        \n        const map = new window.kakao.maps.Map(container, options);\n        setMapInstance(map);\n        setMapLoaded(true);\n        \n        // 초기 마커 설정 (전체 레스토랑)\n        updateMapMarkers(restaurants);\n\n        // 사용자 위치 마커 추가\n        if (userLat && userLng) {\n          const userMarker = new window.kakao.maps.Marker({\n            position: new window.kakao.maps.LatLng(userLat, userLng),\n            image: new window.kakao.maps.MarkerImage(\n              'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',\n              new window.kakao.maps.Size(30, 30)\n            )\n          });\n          \n          userMarker.setMap(map);\n          setUserMarker(userMarker);\n        }\n      } else {\n        // 카카오맵 API가 로드되지 않았으면 1초 후 다시 시도\n        setTimeout(() => initKakaoMapWithLocation(userLat, userLng), 1000);\n      }\n    };\n\n    // 페이지 로드 후 사용자 위치 가져오기 및 지도 초기화\n    const timer = setTimeout(getUserLocationForMap, 1000);\n    \n    return () => clearTimeout(timer);\n  }, []);\n\n  // 두 지점 간의 거리 계산 (하버사인 공식)\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // 지구의 반지름 (km)\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \n      Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    const distance = R * c; // km\n    return distance;\n  };\n\n  // 사용자 위치 가져오기\n  const getUserLocation = () => {\n    if (!navigator.geolocation) {\n      alert('이 브라우저에서는 위치 정보를 지원하지 않습니다.');\n      return;\n    }\n\n    setIsLoadingLocation(true);\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        const newUserLocation = { lat: latitude, lng: longitude };\n        setUserLocation(newUserLocation);\n        \n        // 지도가 로드된 후에만 중심 이동\n        if (mapInstance) {\n          // 기존 사용자 마커 제거\n          if (userMarker) {\n            userMarker.setMap(null);\n          }\n          \n          // 사용자 위치로 지도 중심 이동\n          mapInstance.setCenter(new window.kakao.maps.LatLng(latitude, longitude));\n          mapInstance.setLevel(5);\n          \n          // 새로운 사용자 위치 마커 추가\n          const newUserMarker = new window.kakao.maps.Marker({\n            position: new window.kakao.maps.LatLng(latitude, longitude),\n            image: new window.kakao.maps.MarkerImage(\n              'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyQzIgMTcuNTIgNi40OCAyMiAxMiAyMkMxNy41MiAyMiAyMiAxNy41MiAyMiAxMkMyMiA2LjQ4IDE3LjUyIDIgMTIgMlpNMTIgMjBDNy41OSAyMCA0IDE2LjQxIDQgMTJDNCA3LjU5IDcuNTkgNCAxMiA0QzE2LjQxIDQgMjAgNy41OSAyMCAxMkMyMCAxNi40MSAxNi40MSAyMCAxMiAyMFoiIGZpbGw9IiM2Njc5ZWEiLz4KPHBhdGggZD0iTTEyIDZDNi40OCA2IDIgMTAuNDggMiAxNkMyIDIxLjUyIDYuNDggMjYgMTIgMjZDNy41OSAyNiA0IDIyLjQxIDQgMThDNCAxMy41OSA3LjU5IDEwIDEyIDEwQzE2LjQxIDEwIDIwIDEzLjU5IDIwIDE4QzIwIDIyLjQxIDE2LjQxIDI2IDEyIDI2WiIgZmlsbD0iIzY2NzllYSIvPgo8L3N2Zz4K',\n              new window.kakao.maps.Size(30, 30)\n            )\n          });\n          \n          newUserMarker.setMap(mapInstance);\n          setUserMarker(newUserMarker);\n        }\n        \n        // 가까운 식당 찾기 (3km 이내)\n        const restaurantsWithDistance = restaurants.map(restaurant => {\n          const distance = calculateDistance(\n            latitude, \n            longitude, \n            restaurant.position.lat, \n            restaurant.position.lng\n          );\n          return {\n            ...restaurant,\n            distance: distance\n          };\n        });\n\n        const nearby = restaurantsWithDistance\n          .filter(restaurant => restaurant.distance <= 3)\n          .sort((a, b) => a.distance - b.distance);\n\n        setNearbyRestaurants(nearby);\n        setIsLoadingLocation(false);\n      },\n      (error) => {\n        let errorMessage = '위치 정보를 가져올 수 없습니다.';\n        switch(error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = '위치 정보 접근이 거부되었습니다. 브라우저 설정에서 위치 정보 접근을 허용해주세요.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = '위치 정보를 사용할 수 없습니다.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = '위치 정보 요청 시간이 초과되었습니다.';\n            break;\n        }\n        alert(errorMessage);\n        setIsLoadingLocation(false);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 300000 // 5분\n      }\n    );\n  };\n\n  const getCategoryColor = (category) => {\n    const colors = {\n      '한식': '#ff6b6b',\n      '양식': '#4ecdc4',\n      '일식': '#45b7d1',\n      '중식': '#96ceb4',\n      '동남아식': '#feca57',\n      '카페': '#ff9ff3'\n    };\n    return colors[category] || '#95a5a6';\n  };\n\n  // 현재 시간이 영업시간인지 확인하는 함수\n  const isCurrentlyOpen = (businessHours) => {\n    if (!businessHours) return false;\n    \n    const now = new Date();\n    const currentTime = now.getHours() * 100 + now.getMinutes();\n    \n    // 간단한 시간 파싱 (예: \"11:00 - 22:00\")\n    const timeMatch = businessHours.match(/(\\d{1,2}):(\\d{2})\\s*-\\s*(\\d{1,2}):(\\d{2})/);\n    if (!timeMatch) return true; // 파싱할 수 없으면 영업 중으로 간주\n    \n    const openHour = parseInt(timeMatch[1]);\n    const openMinute = parseInt(timeMatch[2]);\n    const closeHour = parseInt(timeMatch[3]);\n    const closeMinute = parseInt(timeMatch[4]);\n    \n    const openTime = openHour * 100 + openMinute;\n    const closeTime = closeHour * 100 + closeMinute;\n    \n    return currentTime >= openTime && currentTime <= closeTime;\n  };\n\n  // 평점을 별로 표시하는 함수\n  const renderStars = (rating) => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <span key={i} className={`star ${i <= rating ? 'filled' : ''}`}>\n          ★\n        </span>\n      );\n    }\n    return stars;\n  };\n\n  return (\n    <div className=\"map-container\">\n      {/* 상단 검색 영역 */}\n      <div className=\"map-header\">\n        <h2>🗺️ 인슐랭 맛집 지도</h2>\n        \n        {/* 검색창 */}\n        <div className=\"search-section\">\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              placeholder=\"지역명, 맛집 이름으로 검색...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"search-input\"\n            />\n            {searchQuery && (\n              <button onClick={clearSearch} className=\"clear-search-btn\">\n                ✕\n              </button>\n            )}\n          </div>\n          <div className=\"search-results\">\n            <span className=\"results-count\">\n              {filteredRestaurants.length}개의 맛집이 검색되었습니다\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"map-content\">\n        {/* 왼쪽 필터 패널 */}\n        <div className=\"filter-panel\">\n          <div className=\"filter-header\">\n            <h3>🍽️ 음식 종류 필터</h3>\n            <button \n              onClick={toggleAllCategories}\n              className=\"toggle-all-btn\"\n            >\n              {selectedCategories.length === categories.length ? '전체 해제' : '전체 선택'}\n            </button>\n          </div>\n          <div className=\"category-filters\">\n            {categories.map(category => (\n              <button\n                key={category}\n                onClick={() => toggleCategory(category)}\n                className={`category-filter-btn ${selectedCategories.includes(category) ? 'active' : ''}`}\n              >\n                {getCategoryIcon(category)} {category}\n              </button>\n            ))}\n          </div>\n          \n          {/* 마커 상태 필터 */}\n          <div className=\"marker-status-filters\">\n            <h4>🌟 맛집 상태 필터</h4>\n            <button \n              onClick={toggleAllMarkerStatus}\n              className=\"toggle-all-btn\"\n            >\n              {selectedMarkerStatus.length === markerStatusOptions.length ? '전체 해제' : '전체 선택'}\n            </button>\n          </div>\n          <div className=\"marker-status-options\">\n            {markerStatusOptions.map(option => (\n              <button\n                key={option.value}\n                onClick={() => toggleMarkerStatus(option.value)}\n                className={`marker-status-option ${selectedMarkerStatus.includes(option.value) ? 'active' : ''}`}\n                data-status={option.value}\n              >\n                {option.label}\n              </button>\n            ))}\n          </div>\n          \n          {/* 좌표 업데이트 버튼 */}\n          <div className=\"coordinate-update-section\">\n            <h4>🗺️ 좌표 업데이트</h4>\n            <button \n              className={`coordinate-update-btn ${isUpdatingCoordinates ? 'loading' : ''}`}\n              onClick={handleUpdateCoordinates}\n              disabled={isUpdatingCoordinates}\n            >\n              {isUpdatingCoordinates ? '🔄 좌표 변환 중...' : '📍 주소를 좌표로 변환'}\n            </button>\n            <p className=\"coordinate-update-info\">\n              주소 정보를 이용해 지도에 표시할 좌표를 생성합니다.\n            </p>\n          </div>\n\n          {/* 선택된 맛집 정보 */}\n          {selectedRestaurant && (\n            <div className=\"selected-restaurant-info\">\n              <h4>📋 선택된 맛집</h4>\n              <div className=\"restaurant-card\">\n                <h5>{selectedRestaurant.name}</h5>\n                <p className=\"restaurant-category\">{selectedRestaurant.category}</p>\n                <div className=\"restaurant-rating\">\n                  <span className=\"stars\">\n                    {renderStars(selectedRestaurant.rating)}\n                  </span>\n                  <span className=\"rating-text\">{selectedRestaurant.rating}</span>\n                </div>\n                <p className=\"restaurant-description\">{selectedRestaurant.description}</p>\n                <div className=\"restaurant-details\">\n                  <p>📍 {selectedRestaurant.address}</p>\n                  <p>💰 {selectedRestaurant.price}</p>\n                  <p>🕒 {selectedRestaurant.businessHours}</p>\n                  <p>📞 {selectedRestaurant.phone}</p>\n                  <p>🚗 {selectedRestaurant.parking}</p>\n                </div>\n                <div className=\"restaurant-actions\">\n                  <button \n                    className={`favorite-btn ${isInFavorites(selectedRestaurant.id) ? 'favorited' : ''}`}\n                    onClick={() => {\n                      if (isInFavorites(selectedRestaurant.id)) {\n                        removeFromFavorites(selectedRestaurant.id);\n                        alert('찜 목록에서 제거되었습니다! 👋');\n                      } else {\n                        addToFavorites(selectedRestaurant);\n                        alert('찜 목록에 추가되었습니다! 🎉');\n                      }\n                    }}\n                  >\n                    {isInFavorites(selectedRestaurant.id) ? '❤️ 찜됨' : '🤍 찜하기'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* 오른쪽 지도 */}\n        <div className=\"map-section\">\n          <div id=\"map\" style={{ width: '100%', height: '100%' }}></div>\n          \n          {/* 지도 위 위치 버튼 오버레이 */}\n          <div className=\"map-location-overlay\">\n            <button \n              className={`location-btn ${isLoadingLocation ? 'loading' : ''}`}\n              onClick={getUserLocation}\n              disabled={isLoadingLocation}\n            >\n              {isLoadingLocation ? '📍 위치 확인 중...' : '📍 내 위치로 이동'}\n            </button>\n          </div>\n          \n          {/* 미니 팝업 */}\n          {miniPopup && (\n            <div \n              className=\"mini-popup\"\n              style={{\n                left: `${popupPosition.x}px`,\n                top: `${popupPosition.y}px`\n              }}\n              onMouseDown={handleMouseDown}\n              onMouseMove={handleMouseMove}\n              onMouseUp={handleMouseUp}\n              onMouseLeave={handleMouseUp}\n            >\n              <div className=\"mini-popup-header\">\n                <h4>{miniPopup.name}</h4>\n                <button \n                  className=\"close-popup-btn\"\n                  onClick={() => setMiniPopup(null)}\n                >\n                  ✕\n                </button>\n              </div>\n              \n              <div className=\"mini-popup-content\">\n                <div className=\"mini-popup-rating\">\n                  <div className=\"stars\">\n                    {renderStars(miniPopup.rating)}\n                  </div>\n                  <span className=\"rating-text\">{miniPopup.rating}</span>\n                </div>\n                \n                <div className=\"mini-popup-info\">\n                  <p className=\"category\">🍽️ {miniPopup.category}</p>\n                  <p className={`business-status ${isCurrentlyOpen(miniPopup.businessHours) ? 'open' : 'closed'}`}>\n                    {isCurrentlyOpen(miniPopup.businessHours) ? '🟢 영업 중' : '🔴 영업 종료'}\n                  </p>\n                </div>\n                \n                <div className=\"mini-popup-actions\">\n                  <button \n                    className={`favorite-btn ${isInFavorites(miniPopup.id) ? 'favorited' : ''}`}\n                    onClick={() => {\n                      if (isInFavorites(miniPopup.id)) {\n                        removeFromFavorites(miniPopup.id);\n                        alert('찜 목록에서 제거되었습니다! 👋');\n                      } else {\n                        addToFavorites(miniPopup);\n                        alert('찜 목록에 추가되었습니다! 🎉');\n                      }\n                      setMiniPopup(null);\n                    }}\n                  >\n                    {isInFavorites(miniPopup.id) ? '❤️ 찜됨' : '🤍 찜하기'}\n                  </button>\n                  <button \n                    className=\"detail-btn\"\n                    onClick={() => {\n                      setDetailModal(miniPopup);\n                      setMiniPopup(null);\n                    }}\n                  >\n                    📋 상세보기\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* 상세정보 모달 */}\n      {detailModal && (\n        <RestaurantDetailModal\n          restaurant={detailModal}\n          onClose={() => setDetailModal(null)}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default KakaoMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}